## ๐ ุงููุดุฑูุน ุงูููุงุฆู: ุงุฎุชุจุงุฑ ุดุงูู ููุงุฌูุฉ Express API

### ๐ฏ ุงููุฏู
ูุชุงุจุฉ ูุฌููุนุฉ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ ูุชุทุจูู Express API (ูุซู ูุดุฑูุน CRUD API ุงูุฐู ุจููุชู ุณุงุจููุง). ุณูุดูู ุงููุดุฑูุน ูุชุงุจุฉ **ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ (Unit Tests)** ูุน ูุญุงูุงุฉ (mocking) ููุงุนุชูุงุฏูุงุชุ ู**ุงุฎุชุจุงุฑุงุช ุชูุงูููุฉ (Integration Tests)** ูููุงุท ุงูููุงูุฉ (endpoints)ุ ุจูุฏู ุชุญููู ุชุบุทูุฉ ููุฏ ุนุงููุฉ ูุฐุงุช ูุนูู.

---

### ๐๏ธ ุฃุณุงุณ ุงููุดุฑูุน
ููุถู ุฃู ุชุจุฏุฃ ุจูุดุฑูุน **Express CRUD API ูููุชุจ** ุงูุฐู ุจููุชู ูุฃุนุฏุช ููููุชู ูู ุงูุฏูุฑุงุช ุงูุณุงุจูุฉ. ูุฐุง ุงููุดุฑูุน ูุญุชูู ุนูู ุทุจูุงุช (ูุณุงุฑุงุชุ ูุชุญููุงุชุ ุฎุฏูุงุช) ููุงุนุฏุฉ ุจูุงูุงุชุ ููุง ูุฌุนูู ูุซุงููุงู ูุชุทุจูู ุฌููุน ุฃููุงุน ุงูุงุฎุชุจุงุฑุงุช.

---

### ๐ ููุงู ุงููุดุฑูุน

#### **ุงูุฌุฒุก ุงูุฃูู: ุฅุนุฏุงุฏ ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ**
1.  **ุชุซุจูุช ุงูุญุฒู:** ูู ูุดุฑูุนูุ ูู ุจุชุซุจูุช ุญุฒู ุงูุงุฎุชุจุงุฑ ูู `devDependencies`:
    ```bash
    npm install --save-dev jest supertest
    ```
2.  **ุฅุนุฏุงุฏ `package.json`:** ูู ุจุชุญุฏูุซ ูุณู `scripts` ููุดูู ุฃูุงูุฑ ุงูุงุฎุชุจุงุฑ ูุงูุชุบุทูุฉ.
    ```json
    "scripts": {
      "start": "node index.js",
      "test": "jest --watchAll",
      "coverage": "jest --coverage"
    }
    ```
3.  **ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ:**
    * ุฃูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ุฌุฏูุฏุฉ ูุฎุตุตุฉ ููุงุฎุชุจุงุฑ ููุท (ูุซู `books_api_test`).
    * ูู ุจุฅุนุฏุงุฏ ุงูููุฏ ุงูุฎุงุต ุจู ูุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ูุฐู ุนูุฏูุง ูููู ูุชุบูุฑ ุงูุจูุฆุฉ `NODE_ENV` ูุนูููุง ุฅูู `test`.

---
#### **ุงูุฌุฒุก ุงูุซุงูู: ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ (Unit Tests)**
**ุงููุฏู:** ุงุฎุชุจุงุฑ ููุทู ุงูุนูู (business logic) ูู ุทุจูุฉ ุงูุฎุฏูุงุช (Services) ุฃู ุงููุชุญููุงุช (Controllers) ูู **ุนุฒูุฉ ุชุงูุฉ** ุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

1.  **ุงุฎุชุจุงุฑ ุฎุฏูุฉ ุฅูุดุงุก ูุชุงุจ (`createBook` service):**
    * **ุงููููุฉ:** ุงูุชุจ ุงุฎุชุจุงุฑูุง ูุชุญูู ูู ุฃู ุฏุงูุฉ `createBook` ุชุณุชุฏุนู ุฏุงูุฉ ุงูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (`database.save`) ุจุงูุจูุงูุงุช ุงูุตุญูุญุฉ.
    * **ุงูุชูููุฉ:** ุงุณุชุฎุฏู `jest.mock()` ููุญุงูุงุฉ ูุญุฏุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงููุงูู. ูุง ูุฌุจ ุฃู ูุชุตู ูุฐุง ุงูุงุฎุชุจุงุฑ ุจูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ.
    * **ุงูุชุฃููุฏ (Assert):** ุงุณุชุฎุฏู `expect(db.save).toHaveBeenCalledWith(...)` ููุชุญูู ูู ุฃู ุฏุงูุฉ ุงูุญูุธ ุงูููููุฉ ูุฏ ุชู ุงุณุชุฏุนุงุคูุง ุจุงููุณุงุฆุท ุงูุตุญูุญุฉ.

2.  **ุงุฎุชุจุงุฑ ุฏุงูุฉ ุฐุงุช ููุทู:**
    * **ุงููููุฉ:** ุฅุฐุง ูุงู ูุฏูู ุฃู ุฏุงูุฉ ุชุญุชูู ุนูู ููุทู ูุนูู (ูุซู ุฏุงูุฉ ุชุชุญูู ูู ุตุญุฉ ISBN ูููุชุงุจ)ุ ุงูุชุจ ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ููุง ุชุบุทู ุงูุญุงูุงุช ุงููุงุฌุญุฉ ูุงููุงุดูุฉ.

---
#### **ุงูุฌุฒุก ุงูุซุงูุซ: ูุชุงุจุฉ ุงูุงุฎุชุจุงุฑุงุช ุงูุชูุงูููุฉ (Integration Tests)**
**ุงููุฏู:** ุงุฎุชุจุงุฑ ููุงุท ููุงูุฉ ุงูู API ุจุงููุงูู ููุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุทุจูุงุช (router, controller, service, database) ุชุนูู ูุนูุง ุจุดูู ุตุญูุญ.

1.  **ุงูุฅุนุฏุงุฏ ูุงูุชูุธูู:**
    * ุงุณุชุฎุฏู ุฎุทุงูุงุช Jest `beforeEach` ู `afterAll`.
    * ูู `beforeEach`ุ ูู ุจุชูุธูู ุฌุฏุงูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ (`TRUNCATE TABLE ...`) ูุถูุงู ุฃู ูู ุงุฎุชุจุงุฑ ูุจุฏุฃ ูู ุญุงูุฉ ูุธููุฉ.
    * ูู `afterAll`ุ ูู ุจุฅุบูุงู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุณูุงุญ ูู Jest ุจุงูุฎุฑูุฌ ุจุดูู ุณููู.

2.  **ุงุฎุชุจุงุฑ ูุณุงุฑุงุช CRUD:**
    * **ุงููููุฉ:** ุจุงุณุชุฎุฏุงู `supertest`ุ ุงูุชุจ ุงุฎุชุจุงุฑุงุช ููู ููุทุฉ ููุงูุฉ ูู ุงูู API ุงูุฎุงุต ุจุงููุชุจ (`/api/books`).
    * **`POST /api/books`:** ุงูุชุจ ุงุฎุชุจุงุฑูุง ูุฑุณู ุจูุงูุงุช ูุชุงุจ ุฌุฏูุฏุ ุซู ูุคูุฏ ุฃู ุฑูุฒ ุงูุญุงูุฉ ูู `201` ูุฃู ุงูุฌุณู ุงูููุฑุฌุน ูุญุชูู ุนูู ุงููุชุงุจ ุงูุฌุฏูุฏ ูุน `id`.
    * **`GET /api/books`:** ุงูุชุจ ุงุฎุชุจุงุฑูุง ูููู ุฃููุงู ุจุฅุถุงูุฉ ูุชุงุจููุ ุซู ูุณุชุฏุนู ููุทุฉ ุงูููุงูุฉุ ููุคูุฏ ุฃู ุฑูุฒ ุงูุญุงูุฉ ูู `200` ูุฃู ุงูุฌุณู ุงูููุฑุฌุน ูู ูุตูููุฉ ุชุญุชูู ุนูู ุนูุตุฑูู.
    * **`GET /api/books/:id` (ุงูุญุงูุฉ ุงููุงุฌุญุฉ):** ุฃุฏุฎู ูุชุงุจูุง ูู `beforeEach`ุ ุซู ุงุทูุจู ุจูุนุฑูู ูุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ุตุญูุญุฉ.
    * **`GET /api/books/:id` (ุงูุญุงูุฉ ุงููุงุดูุฉ):** ุงุทูุจ ูุนุฑููุง ุบูุฑ ููุฌูุฏ ูุชุฃูุฏ ูู ุฃู ุฑูุฒ ุงูุญุงูุฉ ูู `404`.

---
#### **ุงูุฌุฒุก ุงูุฑุงุจุน: ููุงุณ ุงูุชุบุทูุฉ (Code Coverage)**
1.  ุจุนุฏ ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุชูุ ูู ุจุชุดุบูู ุงูุฃูุฑ:
    ```bash
    npm run coverage
    ```
2.  **ุญูู ุงูุชูุฑูุฑ:** ุงูุชุญ ุชูุฑูุฑ HTML ูู ูุฌูุฏ `/coverage` ูุงูุธุฑ ุฅูู ุงููููุงุช ุงูุชู ูุฏููุง ุชุบุทูุฉ ููุฎูุถุฉ.
3.  **ุงููููุฉ:** ูู ููุงู ุฃู ูุฑูุน `if/else` ุฃู ุญุงูุงุช ุฎุทุฃ ูู ุชูู ุจุงุฎุชุจุงุฑูุงุ ุฃุถู ุงุฎุชุจุงุฑุงุช ุฌุฏูุฏุฉ ูุชุบุทูุฉ ูุฐู ุงูุฃุฌุฒุงุก ุงูุญุฑุฌุฉ ูู ุงูููุฏ. ุงูุฏู ุฅูู ุชุญููู ุชุบุทูุฉ ุนุงููุฉ ูุฐุงุช ูุนูู (ููู 80%).

---
### โ ูุนุงููุฑ ุงูุชูููู
* ูุฌูุฏ ูุฌููุนุฉ ุดุงููุฉ ูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ูุน ุงุณุชุฎุฏุงู ุตุญูุญ ูููุญุงูุงุฉ (mocking).
* ูุฌูุฏ ูุฌููุนุฉ ูููุฉ ูู ุงูุงุฎุชุจุงุฑุงุช ุงูุชูุงูููุฉ ุชุบุทู ุญุงูุงุช ุงููุฌุงุญ ูุงููุดู ูุฌููุน ููุงุท ุงูููุงูุฉ.
* ุชุญููู ูุณุจุฉ ุชุบุทูุฉ ููุฏ ุนุงููุฉ ููุจุฑุฑุฉ.
* ููุฏ ุงุฎุชุจุงุฑ ูุธูู ูููุธู ุจุงุณุชุฎุฏุงู `describe` ู `it` ุจุดูู ูุงุถุญ.

---
### ๐ ุงูุฎุทูุฉ ุงูุฃููู
1.  ุงุจุฏุฃ ุจุฅุนุฏุงุฏ ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ ูู ูุดุฑูุนู: ูู ุจุชุซุจูุช ุงูุญุฒู ูุฅุนุฏุงุฏ `package.json` ููุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ.
2.  ุงุจุฏุฃ ุจูุชุงุจุฉ ุฃูู ุงุฎุชุจุงุฑ ูุญุฏุฉ ูุฃุจุณุท ุฏุงูุฉ ูู ุทุจูุฉ ุงูุฎุฏูุฉ ุงูุฎุงุตุฉ ุจู.
3.  ุจุนุฏ ุฐููุ ุงูุชูู ููุชุงุจุฉ ุฃูู ุงุฎุชุจุงุฑ ุชูุงููู ูููุทุฉ ููุงูุฉ `GET /api/books`.

ุฃุชููู ูู ูู ุงูุชูููู ูู ูุดุฑูุนู ุงูููุงุฆู!