## ๐งช ุงููุญุฏุฉ 2: ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ู E2E

### ๐ ุงูุฏุฑุณ 1: ุงูุงุฎุชุจุงุฑุงุช ุงูุชูุงูููุฉ (Integration Testing)

#### ๐ง **ูุงุฐุง ุณุชุชุนูู**
* ูุง ูู ุงูุงุฎุชุจุงุฑ ุงูุชูุงููู ููุง ุงูุบุฑุถ ููู.
* ุงููุฑู ุงูุฌููุฑู ุจูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ ูุงุฎุชุจุงุฑุงุช ุงูุชูุงูู.
* ูุซุงู ุดุงุฆุน: ุงุฎุชุจุงุฑ ุชูุงุนู ููุทุฉ ููุงูุฉ API ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ.
* ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ ูุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุชูุงูููุฉ (ูุซู ูุงุนุฏุฉ ุจูุงูุงุช ูุฎุตุตุฉ ููุงุฎุชุจุงุฑ).

---
### ๐ค 1. ุงูุตุนูุฏ ูู ูุฑู ุงูุงุฎุชุจุงุฑ
ูู ุงูุฏุฑูุณ ุงูุณุงุจูุฉุ ุฃุชูููุง ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉุ ุงูุชู ุชุชุญูู ูู ูู ูููู ูู ุนุฒูุฉ ุชุงูุฉ. ููููุ ูุฏ ุชูุฌุญ ุฌููุน ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉุ ูุฑุบู ุฐูู ูุง ูุนูู ุงูุชุทุจูู!

**ููุงุฐุงุ** ูุฃู ุงูุฃุฎุทุงุก ุบุงูุจูุง ูุง ุชุญุฏุซ ุนูุฏ **ููุงุท ุงูุงุชุตุงู** ุฃู "ุงูุชูุงูู" ุจูู ุงููุญุฏุงุช. ูุฏ ุชุนูู ุงูุฏุงูุฉ (ุฃ) ุจุดูู ูุซุงูู ุจููุฑุฏูุงุ ูุงูุฏุงูุฉ (ุจ) ุชุนูู ุจุดูู ูุซุงูู ุจููุฑุฏูุงุ ููู ุงูุทุฑููุฉ ุงูุชู ุชุณุชุฏุนู ุจูุง ุงูุฏุงูุฉ (ุฃ) ุงูุฏุงูุฉ (ุจ) ูุฏ ุชููู ุฎุงุทุฆุฉ.

**ุงููุฏู ูู ุงูุงุฎุชุจุงุฑ ุงูุชูุงููู:** ุงูุชุญูู ูู ุฃู ุงููุญุฏุงุช ุฃู ุงูุฎุฏูุงุช ุงููุฎุชููุฉ ุชุนูู ูุนูุง ุจุดูู ุตุญูุญ ููุฌููุนุฉ.

> **ุจุจุณุงุทุฉ:** ููุฏ ููุช ุจุงุฎุชุจุงุฑ ูุญุฏุฉ ูุดูุนุฉ ุงูุงุญุชุฑุงู (Spark Plug) ูุชุฃูุฏุช ูู ุฃููุง ุชุนูู. ูููุช ุจุงุฎุชุจุงุฑ ูุญุฏุฉ ููุถุฎุฉ ุงููููุฏ ูุชุฃูุฏุช ูู ุฃููุง ุชุนูู. ุงูุงุฎุชุจุงุฑ ุงูุชูุงููู ูู ุจูุซุงุจุฉ ุชูุตูู ุงููุถุฎุฉ ูุดูุนุฉ ุงูุงุญุชุฑุงู ุจุงููุญุฑูุ ููุญุงููุฉ ุชุดุบููู ููุชุฃูุฏ ูู ุฃู **ุงูุชูุตููุงุช** ุจูููุง ุตุญูุญุฉ ูุฃู ุงููุญุฑู ูุนูู ุจุงููุนู.

---
### โ๏ธ 2. ุงููุฑู ุงูุฑุฆูุณู: ุงูุนุฒู ููุงุจู ุงูุชูุงูู

| ุงูุฎุงุตูุฉ | ุงุฎุชุจุงุฑ ุงููุญุฏุฉ (Unit Test) | ุงุฎุชุจุงุฑ ุงูุชูุงูู (Integration Test) |
| :--- | :--- | :--- |
| **ุงููุทุงู** | ูุญุฏุฉ ูุงุญุฏุฉ (ุฏุงูุฉุ ููุงุณ). | ูุญุฏุชุงู ุฃู ุฃูุซุฑ ุชุชูุงุนูุงู. |
| **ุงูุงุนุชูุงุฏูุงุช** | **ูุชู ูุญุงูุงุชูุง (Mocked).** ูุง ูุชุญุฏุซ ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ. | **ุญููููุฉ.** ูุณุชุฎุฏู ุบุงูุจูุง ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ (ููู ูุฎุตุตุฉ ููุงุฎุชุจุงุฑ). |
| **ุงูุณุฑุนุฉ** | ุณุฑูุน ุฌุฏูุง. | ุฃุจุทุฃ ูุณุจููุง. |
| **ุงููุฏู** | ุงูุชุญูู ูู ุตุญุฉ ููุทู ุงููุญุฏุฉ. | ุงูุชุญูู ูู ุตุญุฉ ุงูุชูุงุนู ุจูู ุงููุญุฏุงุช. |

---
### โ๏ธ 3. ูุซุงู ุดุงุฆุน: ุงุฎุชุจุงุฑ ููุทุฉ ููุงูุฉ API
ูููุชุฑุถ ุฃู ูุฏููุง ููุทุฉ ููุงูุฉ `POST /api/users` ูู ุชุทุจูู Express. ุนูุฏูุง ูุชู ุงุณุชุฏุนุงุคูุงุ ูุญุฏุซ ุงูุชุฏูู ุงูุชุงูู:
1.  ูุณุชูุจู ุงูู `router` ุงูุทูุจ ูููุฌูู ุฅูู `userController`.
2.  ูููู ุงูู `userController` ุจุงูุชุญูู ูู ุงููุฏุฎูุงุช ูุงุณุชุฏุนุงุก `userService`.
3.  ูููู ุงูู `userService` ุจุชุทุจูู ููุทู ุงูุนูู ูุฅูุดุงุก ูุงุฆู ุงููุณุชุฎุฏู.
4.  ูุณุชุฏุนู `userService` ุงูู `userRepository` ูุญูุธ ุงููุณุชุฎุฏู ูู **ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุนููุฉ**.
5.  ูุชู ุฅุฑุณุงู ุงุณุชุฌุงุจุฉ ูุฌุงุญ (e.g., `201 Created`).

**ูุธููุฉ ุงูุงุฎุชุจุงุฑ ุงูุชูุงููู ููุง** ูู ุงุฎุชุจุงุฑ ูุฐุง ุงูุชุฏูู ุจุฃูููู. ุณูููู ุงูุงุฎุชุจุงุฑ ุจุฅุฑุณุงู ุทูุจ HTTP ุญูููู ุฅูู ููุทุฉ ุงูููุงูุฉุ ุซู ุณูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ููุฑู ูุง ุฅุฐุง ุชู ุฅูุดุงุก ุงููุณุชุฎุฏู ุจูุฌุงุญ. ุฅูู ูุฎุชุจุฑ ุชูุงูู ุงูู Router, Controller, Service, ู Database ูุนูุง.

---
### ๐ง 4. ุงูุฅุนุฏุงุฏ ููุงุฎุชุจุงุฑุงุช ุงูุชูุงูููุฉ
ุงูุงุฎุชุจุงุฑุงุช ุงูุชูุงูููุฉ ููุง ุขุซุงุฑ ุฌุงูุจูุฉ (ุชูุบูุฑ ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช). ูุฐููุ **ูุง ูุฌุจ ุฃุจุฏูุง ุชุดุบูููุง ุนูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฅูุชุงุฌ ุฃู ุญุชู ุงูุชุทููุฑ**.

**ุงูุญู:** ุงุณุชุฎุฏุงู **ูุงุนุฏุฉ ุจูุงูุงุช ูุฎุตุตุฉ ููุงุฎุชุจุงุฑ ููุท**.

**ุฏูุฑุฉ ุงูุนูู:**
1.  **ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑ:** ุฃูุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช ูููุตูุฉ ุชูุงููุง (ูุซู `myapp_test`) ุชูุณุชุฎุฏู ููุท ูุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ุงูุขููุฉ.
2.  **ุฅุนุฏุงุฏ ุงูุชุทุจูู:** ูุฌุจ ุฃู ูุนุฑู ุชุทุจููู ูุชู ูุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ (ุนุงุฏุฉู ุนู ุทุฑูู ูุชุบูุฑ ุจูุฆุฉุ ูุซู `NODE_ENV=test`).
3.  **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ:** ูุจู ุชุดุบูู ูู ุงุฎุชุจุงุฑ (ุฃู ูู ูุฌููุนุฉ ุงุฎุชุจุงุฑ)ุ ูุฌุจ ุงูุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุญุงูุฉ ูุธููุฉ ููุนุฑููุฉ. ูุฐุง ูุชุถูู ุนุงุฏุฉู:
    * **ุฅุนุงุฏุฉ ุชุนููู ุงูุฌุฏุงูู:** ุญุฐู ุฌููุน ุงูุตููู ูู ุงูุฌุฏุงูู ุฐุงุช ุงูุตูุฉ (ุจุงุณุชุฎุฏุงู ุฃูุฑ ูุซู `TRUNCATE`).
    * **ุจุฐุฑ ุงูุจูุงูุงุช (Seeding):** ุฅุฏุฑุงุฌ ุจุนุถ ุงูุจูุงูุงุช ุงูุฃูููุฉ ุงููุนุฑููุฉ ุงูุชู ุณูุนุชูุฏ ุนูููุง ุงูุงุฎุชุจุงุฑ.
4.  **ุงูุชูุธูู:** ุจุนุฏ ุงูุชูุงุก ุงูุงุฎุชุจุงุฑุ ูู ุงูุฌูุฏ ุชูุธูู ุงูุจูุงูุงุช ุงูุชู ุชู ุฅูุดุงุคูุง.

> **ููุงุญุธุฉ:** ุชููุฑ ุฃุทุฑ ุงูุนูู ูุซู Jest "ุฎุทุงูุงุช" (Hooks) ูุซู `beforeAll`, `afterAll`, `beforeEach`, `afterEach`ุ ููู ูุซุงููุฉ ููุถุน ููุทู ุฅุนุฏุงุฏ ูุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฐุง.

---
