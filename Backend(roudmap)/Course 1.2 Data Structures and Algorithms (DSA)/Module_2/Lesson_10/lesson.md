## 🧠 الوحدة 2: الخوارزميات الأساسية (Core Algorithms)

### 📘 الدرس 10: مفهوم العودية (Recursion)

#### 🧠 **ماذا ستتعلم**
* ما هي العودية (Recursion) وكيف تعمل.
* المكونان الأساسيان للدالة العودية: الحالة الأساسية والخطوة العودية.
* كيف يعمل مكدس الاستدعاءات (Call Stack) مع العودية.
* أمثلة كلاسيكية مثل حساب المضروب (Factorial).
* مميزات وعيوب استخدام العودية.

***

### 📝 1. ما هي العودية (Recursion)؟
العودية هي تقنية برمجية حيث تقوم الدالة **باستدعاء نفسها** بشكل مباشر أو غير مباشر لحل مشكلة ما. الفكرة هي تقسيم المشكلة الكبيرة إلى نسخ أصغر من نفس المشكلة حتى نصل إلى مشكلة بسيطة جدًا يمكن حلها مباشرة.

يمكنك تخيلها مثل الدمى الروسية المتداخلة (Matryoshka dolls)، حيث تحتوي كل دمية على نسخة أصغر من نفسها بداخلها.

***

### ⚙️ 2. مكونات الدالة العودية
لكي تعمل الدالة العودية بشكل صحيح وتتجنب الدخول في حلقة لا نهائية، يجب أن تحتوي على جزأين:

1.  **الحالة الأساسية (Base Case):** هي الشرط الذي يوقف العودية. عندما يتحقق هذا الشرط، تُرجع الدالة قيمة محددة دون استدعاء نفسها مرة أخرى. **هذا هو أهم جزء في الدالة العودية**.
2.  **الخطوة العودية (Recursive Step):** هي الجزء الذي تقوم فيه الدالة باستدعاء نفسها، ولكن مع تعديل المدخلات لجعلها أقرب إلى الحالة الأساسية.

***

### 💡 3. مثال عملي: حساب المضروب (Factorial)
مضروب العدد `n` (يُكتب `n!`) هو حاصل ضرب جميع الأعداد الصحيحة الموجبة من 1 إلى `n`.
مثال: `5! = 5 * 4 * 3 * 2 * 1 = 120`.

يمكننا التعبير عن هذه المشكلة بشكل عودي: `factorial(n) = n * factorial(n - 1)`.

```javascript
function factorial(n) {
  // 1. الحالة الأساسية (Base Case)
  if (n === 0 || n === 1) {
    return 1;
  } 
  // 2. الخطوة العودية (Recursive Step)
  else {
    return n * factorial(n - 1);
  }
}

console.log(factorial(5)); // 120
```

***

### 🖥️ 4. العودية ومكدس الاستدعاءات (The Call Stack)
عندما تستدعي دالة، يتم وضعها في قمة "مكدس الاستدعاءات". في حالة العودية، يتم وضع نسخ متعددة من نفس الدالة فوق بعضها البعض في المكدس. عندما يتم الوصول إلى الحالة الأساسية، تبدأ الدوال في إرجاع القيم وتتم إزالتها من المكدس واحدة تلو الأخرى من الأعلى إلى الأسفل.

إذا لم يتم الوصول إلى الحالة الأساسية أبدًا، سيستمر المكدس في الامتلاء حتى يفيض، مما يسبب خطأ شائعًا يسمى **Stack Overflow**.

***

### ⚖️ 5. مميزات وعيوب العودية

| المميزات | العيوب |
| :--- | :--- |
| تجعل الكود أكثر أناقة وقراءة للمشاكل التي هي عودية بطبيعتها (مثل هياكل الشجرة). | يمكن أن تكون أبطأ بسبب الحمل الزائد (overhead) لكل استدعاء دالة. |
| تبسط حل المشاكل المعقدة بتقسيمها إلى أجزاء أصغر وأبسط. | تستهلك ذاكرة أكبر بسبب مكدس الاستدعاءات. |
| | قد تكون أصعب في الفهم والتصحيح (debug) مقارنة بالحلول التكرارية (iterative). |
| | خطر حدوث خطأ "Stack Overflow" إذا كانت العودية عميقة جدًا. |

***
