## 🧠 الوحدة 2: الخوارزميات الأساسية (Core Algorithms)

### 📘 الدرس 5: فرز الفقاعات (Bubble Sort)

#### 🧠 **ماذا ستتعلم**
* مفهوم خوارزمية فرز الفقاعات.
* كيفية عملها خطوة بخطوة.
* كتابة دالة `bubbleSort` بلغة جافاسكريبت.
* تحليل تعقيد الخوارزمية.

---
### 📝 1. ما هو فرز الفقاعات؟
فرز الفقاعات هو خوارزمية بسيطة لترتيب عناصر مصفوفة (أو قائمة). تعمل عن طريق المرور على المصفوفة بشكل متكرر، ومقارنة كل عنصر مع العنصر المجاور له، وتبديلهما إذا كانا في الترتيب الخاطئ. تستمر العملية حتى تصبح المصفوفة مرتبة بالكامل.

---
### 👣 2. كيف تعمل خوارزمية فرز الفقاعات؟
1.  تبدأ من أول عنصر في المصفوفة وتقارنه بالعنصر الثاني. إذا كان الأول أكبر من الثاني، يتم تبديلهما.
2.  تنتقل إلى العنصر الثاني وتقارنه بالثالث، وتكرر نفس العملية.
3.  تستمر على هذا النحو حتى نهاية المصفوفة. بعد أول دورة كاملة، يكون أكبر عنصر قد وصل إلى مكانه الصحيح في نهاية المصفوفة (كأنه "فقاعة" طفت إلى السطح).
4.  تُعاد العملية مرة أخرى على المصفوفة، ولكن هذه المرة نتوقف قبل العنصر الأخير (لأنه مرتب بالفعل). نكرر هذا حتى لا تحدث أي عمليات تبديل في دورة كاملة، مما يعني أن المصفوفة أصبحت مرتبة.

---
### 📝 3. مثال على خوارزمية فرز الفقاعات:

```javascript
function bubbleSort(arr) {
  let n = arr.length;
  let swapped;
  do {
    swapped = false;
    // المرور على العناصر للمقارنة والتبديل
    for (let i = 1; i < n; i++) {
      if (arr[i - 1] > arr[i]) {
        // تبديل العناصر باستخدام Destructuring assignment
        [arr[i - 1], arr[i]] = [arr[i], arr[i - 1]];
        swapped = true; // تم حدوث تبديل
      }
    }
    // بعد كل دورة، أكبر عنصر يكون في مكانه الصحيح، لذا يمكننا تجاهله
    n--; 
  } while (swapped); // استمر طالما هناك تبديلات تحدث
  return arr;
}
```

---
### 📈 4. تحليل التعقيد الزمني
* **أسوأ حالة (Worst Case):** $O(n^2)$ - تحدث عندما تكون المصفوفة مرتبة بشكل عكسي.
* **أفضل حالة (Best Case):** $O(n)$ - تحدث عندما تكون المصفوفة مرتبة بالفعل (تكتشف الخوارزمية ذلك في دورة واحدة).
* **متوسط الحالة (Average Case):** $O(n^2)$ - لأنها تتطلب حلقتين متداخلتين في المتوسط.

---
### 💡 5. مميزات وعيوب فرز الفقاعات

| المميزات | العيوب |
| :--- | :--- |
| بسيطة وسهلة الفهم والتطبيق. | بطيئة جدًا مع المصفوفات الكبيرة. |
| تعمل على المكان مباشرة (in-place)، أي لا تحتاج لذاكرة إضافية كبيرة. | ليست فعالة مقارنة بخوارزميات الفرز الأخرى مثل Merge Sort أو Quick Sort. |

---
### 🛠️ جرب بنفسك
* جرّب كتابة دالة `bubbleSort` بنفسك دون النظر إلى المثال.
* خذ مصفوفة صغيرة مثل `[5, 3, 8, 1]` وجرب تتبع خطوات الخوارزمية يدويًا على الورق لترى كيف يتم الترتيب.

---
