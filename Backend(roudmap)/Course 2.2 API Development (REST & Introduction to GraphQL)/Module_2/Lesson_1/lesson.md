## 🚀 الوحدة 2: مقدمة في GraphQL

### 📘 الدرس 1: مقدمة في GraphQL (لماذا GraphQL؟)

#### 🧠 **ماذا ستتعلم**
* ما هي GraphQL.
* المشاكل الأساسية التي تحلها: الجلب الزائد والجلب الناقص للبيانات.
* مقارنة عالية المستوى بين GraphQL و REST.
* مفهوم نقطة النهاية الواحدة (Single Endpoint) في GraphQL.

---
### 🤔 1. ما هي مشاكل REST التي أدت لظهور GraphQL؟
على الرغم من أن REST هو نمط قوي وشائع، إلا أنه يواجه تحديين رئيسيين في التطبيقات الحديثة، خاصة تلك التي لديها هياكل بيانات معقدة أو عملاء متعددين (مثل الويب والجوال).

#### **أ. الجلب الزائد (Over-fetching)**
يحدث هذا عندما تقوم نقطة نهاية REST بإرجاع **بيانات أكثر مما يحتاجه العميل**.
* **مثال:** لديك نقطة نهاية `GET /api/users/1` التي تُرجع معلومات المستخدم الكاملة (ID, name, email, address, posts, comments). لكن تطبيق الجوال يحتاج فقط إلى عرض اسم المستخدم. في هذه الحالة، تم إهدار الكثير من البيانات وعرض النطاق الترددي (bandwidth) في نقل معلومات غير ضرورية.

#### **ب. الجلب الناقص (Under-fetching)**
يحدث هذا عندما **لا توفر نقطة نهاية واحدة كل البيانات التي يحتاجها العميل**، مما يضطره إلى إرسال **عدة طلبات** للحصول على كل ما يريد.
* **مثال:** لعرض صفحة ملف شخصي للمستخدم، قد يحتاج العميل إلى:
    1.  `GET /api/users/1` (للحصول على تفاصيل المستخدم).
    2.  `GET /api/users/1/posts` (للحصول على منشوراته).
    3.  `GET /api/users/1/friends` (للحصول على قائمة أصدقائه).
* هذه الطلبات المتعددة تزيد من وقت التحميل وتجعل التطبيق أبطأ.

---
### 💡 2. الحل: GraphQL
**GraphQL** هي **لغة استعلام (Query Language)** لواجهة API الخاصة بك، بالإضافة إلى بيئة تشغيل من جانب الخادم لتنفيذ هذه الاستعلامات. تم تطويرها بواسطة فيسبوك وهي الآن مفتوحة المصدر.

**الفكرة الأساسية:** GraphQL تسمح **للعميل** بأن يطلب **بالضبط البيانات التي يحتاجها**، لا أكثر ولا أقل، وكل ذلك في **طلب واحد فقط**.

> **ببساطة:**
> * **REST** يشبه الطلب من **قائمة طعام ثابتة**. يمكنك طلب "وجبة الستيك"، وستحصل على الستيك والبطاطس والخضروات، سواء كنت تريد الخضروات أم لا (Over-fetching).
> * **GraphQL** يشبه الذهاب إلى **بوفيه مفتوح**. تذهب بطبقك (الاستعلام) وتختار بالضبط ما تريده من كل قسم، بالكمية التي تريدها، كل ذلك في رحلة واحدة.

---
### ⚖️ 3. الفروقات الرئيسية: REST مقابل GraphQL

| الخاصية | REST | GraphQL |
| :--- | :--- | :--- |
| **نقاط النهاية** | متعددة (مثل `/users`, `/posts`). | عادةً نقطة نهاية واحدة فقط (مثل `/graphql`). |
| **جلب البيانات** | الخادم هو من يقرر شكل البيانات المُرجعة. | العميل هو من يحدد شكل البيانات التي يحتاجها. |
| **أفعال HTTP** | تستخدم أفعال متعددة (`GET`, `POST`, `PUT`, `DELETE`). | تستخدم `POST` بشكل أساسي لجميع العمليات. |

**مثال على استعلام GraphQL:**
لحل مشكلة "الجلب الناقص" من المثال السابق، يمكن للعميل إرسال هذا الاستعلام الواحد:
```graphql
query {
  user(id: "1") {
    name
    email
    posts {
      title
    }
  }
}
```
سيحصل العميل على استجابة JSON تحتوي فقط على اسم المستخدم وبريده الإلكتروني وعناوين منشوراته، كل ذلك في طلب واحد.

---
