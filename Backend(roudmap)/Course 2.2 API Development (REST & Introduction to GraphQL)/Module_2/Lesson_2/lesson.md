## 🚀 الوحدة 2: مقدمة في GraphQL

### 📘 الدرس 2: المفاهيم الأساسية لـ GraphQL

#### 🧠 **ماذا ستتعلم**
* دور المخطط (Schema) ولغة تعريفه (SDL).
* أنواع البيانات الأساسية في GraphQL (القياسية والكائنات).
* ما هو الاستعلام (Query) لجلب البيانات.
* ما هو التعديل (Mutation) لتغيير البيانات.
* دور المُحلِّل (Resolver) في جلب البيانات الفعلية.

---
### 📜 1. المخطط (Schema): عقد الـ API
المخطط هو قلب أي خدمة GraphQL. إنه يمثل **العقد (Contract)** بين العميل والخادم. يقوم المخطط بتعريف كل إمكانيات الـ API بشكل صارم:
* أنواع البيانات التي يمكن للعميل طلبها.
* العمليات المتاحة (جلب البيانات أو تعديلها).

يتم كتابة المخطط باستخدام **لغة تعريف المخطط (Schema Definition Language - SDL)**، وهي لغة بسيطة وسهلة القراءة.

> **ببساطة:** المخطط هو **قائمة الطعام الكاملة** في مطعم البوفيه. هو يخبرك بالضبط ما هي الأطباق (الأنواع) المتاحة وما يمكنك القيام به (العمليات).

---
### 🧩 2. الأنواع (Types): لبنات البناء
كل شيء في GraphQL يتمحور حول الأنواع. هي تصف شكل البيانات التي يمكنك جلبها من الـ API.

* **الأنواع القياسية (Scalar Types):** هي الأنواع الأساسية المدمجة.
    * `Int`: عدد صحيح.
    * `Float`: عدد عشري.
    * `String`: نص.
    * `Boolean`: قيمة منطقية (`true` أو `false`).
    * `ID`: معرف فريد (يتم التعامل معه كنص).

* **أنواع الكائنات (Object Types):** هي الأنواع المخصصة التي تعرفها لتناسب بيانات تطبيقك.

**مثال باستخدام SDL:**
```graphql
# هذا تعريف لنوع بيانات "كتاب" مخصص
type Book {
  id: ID!
  title: String!
  author: String
}
```
> **ملاحظة:** علامة التعجب `!` تعني أن هذا الحقل **مطلوب** ولا يمكن أن تكون قيمته `null`.

---
### 🔍 3. الاستعلامات (Queries): لجلب البيانات
الاستعلامات تستخدم **لقراءة أو جلب** البيانات من الخادم. هي تمثل الجزء `R` (Read) من عمليات CRUD.

يتم تعريف جميع الاستعلامات المتاحة داخل نوع خاص يسمى `Query` في المخطط.

**مثال في المخطط:**
```graphql
type Query {
  # هذا الاستعلام يُرجع مصفوفة من الكتب
  books: [Book]

  # هذا الاستعلام يُرجع كتابًا واحدًا بناءً على معرفه
  book(id: ID!): Book
}
```
**مثال على استعلام يرسله العميل:**
```graphql
query {
  book(id: "1") {
    title
    author
  }
}
```
---
### ✏️ 4. التعديلات (Mutations): لتغيير البيانات
التعديلات تستخدم **لكتابة أو تغيير** البيانات. هي تغطي عمليات `C` (Create)، `U` (Update)، و `D` (Delete) من CRUD.

يتم تعريف جميع عمليات التعديل المتاحة داخل نوع خاص يسمى `Mutation` في المخطط.

**مثال في المخطط:**
```graphql
type Mutation {
  addBook(title: String!, author: String): Book
}
```
**مثال على تعديل يرسله العميل:**
```graphql
mutation {
  addBook(title: "A New Hope", author: "George Lucas") {
    id
    title
  }
}
```
---
### ⚙️ 5. المُحلِّلات (Resolvers): أين يحدث السحر
هذا هو الجزء الخاص بالخادم. المُحلِّل هو **دالة** مسؤوليتها جلب البيانات لحقل معين في المخطط. لكل حقل في المخطط، توجد دالة مُحلِّل مقابلة له.

> **ببساطة:** إذا كان المخطط هو **"ماذا"** يمكنك أن تطلب، فإن المُحلِّلات هي **"كيف"** يقوم الخادم بجلب هذه البيانات. المُحلِّل الخاص بـ `book(id: "1")` قد يتصل بقاعدة بيانات SQL، بينما المُحلِّل الخاص بـ `books` قد يجلب البيانات من واجهة API أخرى.

عندما يستقبل الخادم استعلامًا، فإنه يستدعي دوال المُحلِّل المقابلة لكل حقل مطلوب في الاستعلام لتجميع الاستجابة النهائية.

---