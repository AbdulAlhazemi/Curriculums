## 🌐 الوحدة 1: مبادئ وتصميم واجهات RESTful API

### 📘 الدرس 2: تصميم نقاط نهاية RESTful API

#### 🧠 **ماذا ستتعلم**
* أفضل الممارسات لتسمية الموارد في عناوين URL.
* كيفية استخدام الأسماء الجمع (Plural Nouns) للمجموعات.
* كيفية تمثيل العلاقات بين الموارد المختلفة.
* أشهر استراتيجيات إدارة إصدارات الـ API (Versioning).

---
### 🤔 1. لماذا يعتبر تصميم نقاط النهاية مهمًا؟
واجهة برمجة التطبيقات (API) هي واجهة مستخدم (UI) للمطورين. وكما هو الحال مع أي واجهة مستخدم، يجب أن تكون **سهلة الفهم، متوقعة، ومتسقة**. تصميم نقاط النهاية (Endpoints) بشكل جيد هو أساس بناء API سهل الاستخدام وقابل للصيانة على المدى الطويل.

---
### 📝 2. قواعد التسمية: استخدم الأسماء، وليس الأفعال
القاعدة الذهبية في تصميم RESTful API هي أن عناوين URL يجب أن تمثل **الموارد (Resources)**، والتي هي **أسماء (Nouns)**. أما **الأفعال (Verbs)** التي نريد القيام بها على هذه الموارد، فيتم التعبير عنها باستخدام **أفعال HTTP** (GET, POST, PUT, DELETE).

* **استخدم الأسماء الجمع (Plural Nouns):** من الأفضل دائمًا استخدام صيغة الجمع للموارد التي تمثل مجموعة.

**قارن بين الأمثلة:**

| جيد (RESTful) ✅ | سيئ (Not RESTful) ❌ |
| :--- | :--- |
| `GET /products` | `GET /getAllProducts` |
| `POST /products` | `POST /createNewProduct` |
| `GET /products/123`| `GET /getProductById?id=123` |
| `DELETE /products/123` | `POST /deleteProduct` |

---
### 🔗 3. تمثيل العلاقات بين الموارد
عندما يكون لديك مورد تابع لمورد آخر (مثل تعليقات تابعة لمقال)، يجب أن تعكس بنية URL هذه العلاقة عن طريق تداخل المسارات.

**مثال:** للتعامل مع التعليقات على مقال معين يحمل المعرف `42`.

* **للحصول على جميع التعليقات للمقال رقم 42:**
    * **جيد:** `GET /posts/42/comments`
    * **سيئ:** `GET /getCommentsForPost?postId=42`

* **للحصول على تعليق محدد (رقم 7) من المقال رقم 42:**
    * **جيد:** `GET /posts/42/comments/7`

هذه الطريقة تجعل الـ API أكثر وضوحًا ومنطقية.

---
### 📅 4. إدارة إصدارات الـ API (Versioning)
مع مرور الوقت، قد تحتاج إلى إجراء تغييرات على الـ API الخاص بك. بعض هذه التغييرات قد تكون "تغييرات كاسرة" (Breaking Changes) أي أنها ستؤثر على التطبيقات التي تستخدم الإصدار الحالي. إدارة الإصدارات تسمح لك بإطلاق نسخة جديدة من الـ API مع الحفاظ على النسخة القديمة تعمل للعملاء الحاليين.

**أشهر الاستراتيجيات:**

1.  **إدارة الإصدار عبر عنوان URL (URL Versioning):**
    هي الطريقة الأكثر شيوعًا ووضوحًا. يتم وضع رقم الإصدار مباشرة في المسار.
    * `https://api.example.com/v1/products`
    * `https://api.example.com/v2/products`

2.  **إدارة الإصدار عبر الترويسات (Header Versioning):**
    يتم تحديد الإصدار في ترويسة HTTP مخصصة. هذا يحافظ على نظافة عناوين URL.
    * `Accept-Version: v1`

3.  **إدارة الإصدار عبر معامل استعلام (Query Parameter Versioning):**
    يتم تمرير رقم الإصدار كمعامل في سلسلة الاستعلام.
    * `https://api.example.com/products?version=1`

---