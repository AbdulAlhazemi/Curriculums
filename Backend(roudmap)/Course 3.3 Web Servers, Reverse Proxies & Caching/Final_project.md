## ๐ ุงููุดุฑูุน ุงูููุงุฆู: ุฅุนุฏุงุฏ ุจููุฉ ุชุญุชูุฉ ุงุญุชุฑุงููุฉ ูุชุทุจูู Node.js

### ๐ฏ ุงููุฏู
ุชุทุจูู ุงูููุงุฑุงุช ุงูููุชุณุจุฉ ูู ูุฐู ุงูุฏูุฑุฉ ูุฅุนุฏุงุฏ ุจูุฆุฉ ุชุดุบูู ูููุฉ ููุงุจูุฉ ููุชุทููุฑ ูุชุทุจูู Express API. ุณุชููู ุจุฅุนุฏุงุฏ Nginx ููููู ุนูุณู (reverse proxy) ูุชุทุจูู ุทุจูุฉ ุชุฎุฒูู ูุคูุช (caching layer) ุจุงุณุชุฎุฏุงู Redis ูุชุญุณูู ุงูุฃุฏุงุก ุจุดูู ููุญูุธ.

---

### ๐๏ธ ุฃุณุงุณ ุงููุดุฑูุน
ููุถู ุฃู ุชุจุฏุฃ ุจูุดุฑูุน **Express CRUD API** ุงูุฐู ุจููุชู ูู ุงูุฏูุฑุงุช ุงูุณุงุจูุฉ (ูุซู API ุงููุชุจ ุฃู ุงูููุงู). ูุฌุจ ุฃู ูููู ูุฐุง ุงูุชุทุจูู ูุชุตูุงู ุจูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL. ูุฐุง ุงููุดุฑูุน ุณูุถูู ุทุจูุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ ุญููู.

---

### ๐ ููุงู ุงููุดุฑูุน

#### **ุงูุฌุฒุก ุงูุฃูู: ุฅุนุฏุงุฏ Nginx ููููู ุนูุณู (Reverse Proxy)**
ุงููุฏู ูู ูุฐุง ุงูุฌุฒุก ูู ุญูุงูุฉ ุฎุงุฏู Node.js ุงูุฎุงุต ุจู ูุฌุนูู ูุงุจูุงู ูููุตูู ุนุจุฑ ูููุฐ HTTP ุงูููุงุณู (80).

1.  **ุชุดุบูู ุงูุชุทุจูู:** ุชุฃูุฏ ูู ุฃู ุชุทุจูู Express ุงูุฎุงุต ุจู ูุนูู ุนูู ูููุฐ ุฏุงุฎูู ุบูุฑ ูุณุชุฎุฏูุ ุนูู ุณุจูู ุงููุซุงู `5000`.
2.  **ุฅูุดุงุก ููู ุฅุนุฏุงุฏ Nginx:**
    * ุฃูุดุฆ ููู ุฅุนุฏุงุฏ ุฌุฏูุฏ ูู `/etc/nginx/sites-available/my-app`.
    * ุงูุชุจ ูุชูุฉ `server` ุชุณุชูุน ุนูู ุงููููุฐ `80`.
    * ุฏุงุฎู ูุชูุฉ `location /`ุ ุงุณุชุฎุฏู `proxy_pass` ูุชูุฌูู ุฌููุน ุงูุทูุจุงุช ุฅูู ุชุทุจูู Node.js ุงูุฐู ูุนูู ุนูู `http://localhost:5000`.
    * ูุง ุชูุณู ุฅุถุงูุฉ ุชุฑููุณุงุช ุงูุจุฑููุณู ุงููููุฉ (`proxy_set_header`).
3.  **ุชูุนูู ุงูุฅุนุฏุงุฏ:**
    * ูู ุจุฅูุดุงุก ุฑุงุจุท ุฑูุฒู ูู `sites-available` ุฅูู `sites-enabled`.
    * ุงุฎุชุจุฑ ุงูุฅุนุฏุงุฏุงุช (`sudo nginx -t`) ุซู ุฃุนุฏ ุชุญููู Nginx (`sudo systemctl reload nginx`).
4.  **ุงูุชุญูู:** ูุฌุจ ุฃู ุชููู ูุงุฏุฑูุง ุงูุขู ุนูู ุงููุตูู ุฅูู ุชุทุจูู Express ุงูุฎุงุต ุจู ุนู ุทุฑูู ุฒูุงุฑุฉ `http://localhost` ูู ูุชุตูุญู (ุจุฏูู ุชุญุฏูุฏ ุงููููุฐ `5000`).

---
#### **ุงูุฌุฒุก ุงูุซุงูู: ุชุทุจูู ุงูุชุฎุฒูู ุงููุคูุช ุจุงุณุชุฎุฏุงู Redis**
ุงููุฏู ูู ูุฐุง ุงูุฌุฒุก ูู ุชูููู ุงูุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุณุฑูุน ุงูุงุณุชุฌุงุจุงุช ููุทูุจุงุช ุงููุชูุฑุฑุฉ.

1.  **ุฅุนุฏุงุฏ Redis ูู ุชุทุจููู:**
    * ูู ููุฏ Expressุ ูู ุจุงูุงุชุตุงู ุจุฎุงุฏู Redis (ููููู ุงูุชุฑุงุถ ุฃูู ูุนูู ูู ุจูุฆุฉ ุงูุชุนูู).
2.  **ุชุทุจูู ุงููุงุด ุนูู ุทูุจ `GET`:**
    * ุงุฎุชุฑ ููุทุฉ ููุงูุฉ `GET` ููููุฉ (ูุซู `GET /api/books/:id` ุงูุชู ุชุณุชุนูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช).
    * ูู ุจุชุนุฏูู ููุทู ุงููุชุญูู ููุชุจุน ููุท **Cache-Aside**:
        ุฃ. **ุงุจุญุซ ูู Redis ุฃููุงู** ุนู ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ููุชุงุญ ูุฑูุฏ (ูุซู `book:123`).
        ุจ. **ุฅุฐุง ูุฌุฏุช (Cache Hit):** ุฃุฑุฌุน ุงูุจูุงูุงุช ูู Redis ูุจุงุดุฑุฉ.
        ุฌ. **ุฅุฐุง ูู ุชุฌุฏ (Cache Miss):** ุงุฐูุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุงุญุตู ุนูู ุงูุจูุงูุงุชุ **ุฎุฒููุง ูู Redis** ูุน ูุฏุฉ ุตูุงุญูุฉ (TTL)ุ ุซู ุฃุฑุฌุนูุง ููุนููู.
3.  **ุชุทุจูู ุฅุจุทุงู ุงููุงุด (Cache Invalidation):**
    * ูุฐุง ูู ุงูุฌุฒุก ุงูุฃูู. ูู ููุงุท ุงูููุงูุฉ ุงูุชู ุชุนุฏู ุงูุจูุงูุงุช (ูุซู `PUT /api/books/:id` ุฃู `DELETE /api/books/:id`):
    * ุจุนุฏ ุชุญุฏูุซ ุฃู ุญุฐู ุงูุณุฌู ุจูุฌุงุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูู **ุจุญุฐู ุงูููุชุงุญ ุงูููุงุจู ูู ูู Redis** ุจุงุณุชุฎุฏุงู `redisClient.del('book:123')`.

---
#### **ุงูุฌุฒุก ุงูุซุงูุซ (ุชุญุฏู ุฅุถุงูู): ููุงุฒูุฉ ุงูุฃุญูุงู ู HTTPS**
1.  **ููุงุฒูุฉ ุงูุฃุญูุงู:**
    * ูู ุจุชุดุบูู ูุณุฎุชูู ูู ุชุทุจูู Node.js ุนูู ูููุฐูู ูุฎุชูููู (ูุซู `5000` ู `5001`).
    * ูู ููู ุฅุนุฏุงุฏ Nginxุ ุฃูุดุฆ ูุชูุฉ `upstream` ุชุญุชูู ุนูู ุงูุฎุงุฏููู.
    * ูู ุจุชุญุฏูุซ ุชูุฌูู `proxy_pass` ููุดูุฑ ุฅูู ูุฌููุนุฉ `upstream`.
    * ุงุฎุชุจุฑ ุนู ุทุฑูู ุชุญุฏูุซ ุงูุตูุญุฉ ุนุฏุฉ ูุฑุงุช ูุฑุคูุฉ ุงูุงุณุชุฌุงุจุฉ ุชุฃุชู ูู ุฎูุงุฏู ูุฎุชููุฉ.
2.  **HTTPS:**
    * ูู ุจุชุนุฏูู ููู ุฅุนุฏุงุฏ Nginx ููุญุชูู ุนูู ูุชูุฉ `server` ุฅุถุงููุฉ ุชููู ุจุฅุนุงุฏุฉ ุชูุฌูู ูู ุทูุจุงุช `http` (ูููุฐ 80) ุฅูู `https` (ูููุฐ 443).
    * ูู ูุชูุฉ ุงูุฎุงุฏู ุงูุฑุฆูุณูุฉุ ูู ุจุชุบููุฑ `listen` ุฅูู `443 ssl` ูุฃุถู ุชูุฌููุงุช `ssl_certificate` ู `ssl_certificate_key` ุงูููููุฉ.

---
### โ ูุนุงููุฑ ุงูุชูููู
* ุฅุนุฏุงุฏ ูููู ุนูุณู ูุนูู ุจุดูู ุตุญูุญ ูุน Nginx.
* ุชุทุจูู ุทุจูุฉ ุชุฎุฒูู ูุคูุช ูุนุงูุฉ ุจุงุณุชุฎุฏุงู Redis ุชููู ูู ุงุณุชุฏุนุงุกุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช.
* ุชูููุฐ ุฅุจุทุงู ุงููุงุด ุจุดูู ุตุญูุญ ุนูุฏ ุชุนุฏูู ุฃู ุญุฐู ุงูุจูุงูุงุช.
* (ุงุฎุชูุงุฑู) ุฅุนุฏุงุฏ ููุงุฒูุฉ ุฃุญูุงู ูุธูููุฉ.
* (ุงุฎุชูุงุฑู) ููู ุฅุนุฏุงุฏ Nginx ุตุญูุญ ูุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู HTTPS.

---
### ๐ ุงูุฎุทูุฉ ุงูุฃููู
1.  ุงุจุฏุฃ ุจุชุดุบูู ุชุทุจูู Express API ุงูุฎุงุต ุจู ุนูู ูููุฐ ุบูุฑ ูุณุชุฎุฏู (ูุซู `5000`).
2.  ุฑูุฒ ุนูู **ุงูุฌุฒุก ุงูุฃูู** ูู ุงููุดุฑูุน: ุฅูุดุงุก ูุชูุนูู ููู ุฅุนุฏุงุฏ Nginx ููุนูู ููููู ุนูุณู ููุฐุง ุงูุชุทุจูู. ุชุฃูุฏ ูู ุฃูู ูุนูู ูุจู ุงูุงูุชูุงู ุฅูู ุงูุชุฎุฒูู ุงููุคูุช.

ุฃุชููู ูู ูู ุงูุชูููู ูู ูุดุฑูุนู ุงูููุงุฆู!