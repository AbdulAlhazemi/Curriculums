## 🌐 الوحدة 1: خوادم الويب والوكلاء العكسيون (Reverse Proxies)

### 📘 الدرس 1: خوادم الويب مقابل خوادم التطبيقات

#### 🧠 **ماذا ستتعلم**
* الفرق الأساسي بين خادم الويب (Web Server) وخادم التطبيقات (Application Server).
* الدور الذي يلعبه Node.js/Express كخادم تطبيقات.
* لماذا نستخدم خادم ويب مثل Nginx أمام خادم تطبيقات Node.js في بيئات الإنتاج.

---
### 🤔 1. أليس خادم Express الخاص بي خادم ويب؟
نعم ولا. عندما تقوم بتشغيل تطبيق Express، فإنه بالفعل يستمع لطلبات HTTP ويستجيب لها. لكن في عالم البنية التحتية للويب، هناك فصل في المسؤوليات بين نوعين مختلفين من الخوادم.

---
### 🏛️ 2. خادم الويب (Web Server)
**وظيفته الأساسية:** خدمة **المحتوى الثابت (Static Content)** للعملاء. هو مُحسَّن بشكل هائل ليكون سريعًا جدًا في التعامل مع آلاف الاتصالات المتزامنة وتقديم ملفات مثل HTML, CSS, JavaScript, والصور مباشرة من القرص الصلب.

> **ببساطة:** خادم الويب يشبه **أمين مكتبة** سريع جدًا. تطلب منه كتابًا معينًا (`style.css`)، فيذهب إلى الرف الصحيح ويحضره لك فورًا. هو لا يكتب الكتب، بل يقدمها فقط.
> **أشهر الأمثلة:** Nginx, Apache.

---
### 🏭 3. خادم التطبيقات (Application Server)
**وظيفته الأساسية:** تنفيذ **منطق العمل (Business Logic)** وإنشاء **محتوى ديناميكي**. هو البيئة التي يعمل فيها الكود الفعلي لتطبيقك (مثل كود Node.js/Express). هو يتصل بقواعد البيانات، يتفاعل مع واجهات API أخرى، ويخصص الاستجابات بناءً على طلب المستخدم.

> **ببساطة:** خادم التطبيقات يشبه **فريق الباحثين والكتاب** في المكتبة. عندما تطرح سؤالاً معقدًا، فإنهم لا يعطونك كتابًا جاهزًا، بل يقومون بالبحث، تجميع المعلومات، وكتابة إجابة مخصصة لك (مثل صفحة JSON تحتوي على بيانات ملفك الشخصي).
> **أشهر الأمثلة:** Node.js, Tomcat (Java), Gunicorn (Python).

---
### 🤝 4. لماذا نستخدمهما معًا؟ العلاقة التكافلية
في بيئة الإنتاج، **لا يتم أبدًا** تعريض خادم تطبيقات Node.js للإنترنت مباشرة. بدلاً من ذلك، نضع دائمًا **خادم ويب (مثل Nginx) أمامه**. هذا الإعداد يسمى **الوكيل العكسي (Reverse Proxy)**.

**لماذا؟ لتقسيم المهام:**
1.  **Nginx (في المقدمة):** يستقبل جميع الطلبات الواردة.
    * إذا كان الطلب لملف ثابت (مثل صورة أو ملف CSS)، فإنه يقدمه بنفسه بسرعة فائقة.
    * إذا كان الطلب يتطلب منطقًا (مثل طلب API)، فإنه يمرره إلى خادم تطبيقات Node.js.
2.  **Node.js (في الخلفية):** يستقبل الطلبات الديناميكية فقط من Nginx. هذا يسمح له بالتركيز على ما يبرع فيه: تنفيذ منطق التطبيق.

**الفوائد الإضافية لوجود Nginx في المقدمة:**
* **موازنة الأحمال (Load Balancing):** يمكنه توزيع الطلبات على عدة نسخ من تطبيق Node.js.
* **الأمان:** يعمل كطبقة حماية إضافية.
* **إنهاء SSL/TLS:** يمكنه التعامل مع تعقيدات HTTPS، مما يبسط كود Node.js.
* **الضغط والتخزين المؤقت (Caching):** يمكنه ضغط الاستجابات وتخزينها مؤقتًا لتسريع الأداء.

---
