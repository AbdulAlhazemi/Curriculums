## ๐๏ธ ุงููุญุฏุฉ 2: ุงุณุชุนูุงูุงุช SQL ุงููุชูุฏูุฉ ูุชุตููู ููุงุนุฏ ุงูุจูุงูุงุช

### ๐ ุงูุฏุฑุณ 5: ุงููุนุงููุงุช (Transactions) ูุฎุตุงุฆุต ACID

#### ๐ง **ูุงุฐุง ุณุชุชุนูู**
* ูุง ูู ูุนุงููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Transaction).
* ููุงุฐุง ุชุนุชุจุฑ ุงููุนุงููุงุช ุถุฑูุฑูุฉ ููุนูููุงุช ุงูุชู ุชุชุถูู ุฎุทูุงุช ูุชุนุฏุฏุฉ.
* ูุนูู ุฎุตุงุฆุต ACID ุงูุฃุฑุจุน: Atomicity, Consistency, Isolation, Durability.

---
### ๐ค 1. ุงููุดููุฉ: ุนูููุงุช ูุชุนุฏุฏุฉ ุงูุฎุทูุงุช
ุชุฎูู ุนูููุฉ ุชุญููู ุจููู ุจุณูุทุฉ: ุชุฑูุฏ ุชุญููู 100 ุฑูุงู ูู ุญุณุงุจู (A) ุฅูู ุญุณุงุจ ุตุฏููู (B). ูุฐู ุงูุนูููุฉ ุชุชุทูุจ ุฎุทูุชูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
1.  **ุฎุตู** 100 ุฑูุงู ูู ุฑุตูุฏ ุงูุญุณุงุจ A.
2.  **ุฅุถุงูุฉ** 100 ุฑูุงู ุฅูู ุฑุตูุฏ ุงูุญุณุงุจ B.

**ูุงุฐุง ูู ุญุฏุซ ุงููุทุงุน ูู ุงูููุฑุจุงุก ุฃู ุนุทู ูู ุงููุธุงู *ุจุนุฏ* ุงูุฎุทูุฉ 1 ููุจู ุงูุฎุทูุฉ 2ุ**
ููุฏ ุชู ุฎุตู ุงููุจูุบ ูู ุญุณุงุจูุ ูููู ูู ูุตู ุฃุจุฏูุง ุฅูู ุญุณุงุจ ุตุฏููู. ููุฏ "ุงุฎุชูู" ุงููุงูุ ูุฃุตุจุญุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุญุงูุฉ ุบูุฑ ูุชุณูุฉ ูุบูุฑ ุตุญูุญุฉ.

---
### ๐ก 2. ุงูุญู: ุงููุนุงููุฉ (The Transaction)
ุงููุนุงููุฉ ูู ูุฌููุนุฉ ูู ุนูููุฉ SQL ูุงุญุฏุฉ ุฃู ุฃูุซุฑ ูุชู ุชูููุฐูุง **ููุญุฏุฉ ุนูู ููุทููุฉ ูุงุญุฏุฉ**. ุงููุจุฏุฃ ุงูุฃุณุงุณู ูููุนุงููุฉ ูู **"ุฅูุง ุฃู ุชูุฌุญ ุฌููุนูุงุ ุฃู ุชูุดู ุฌููุนูุง" (All or Nothing)**.

ุฅุฐุง ูุดูุช ุฃู ุฎุทูุฉ ุฏุงุฎู ุงููุนุงููุฉุ ูุชู ุงูุชุฑุงุฌุน ุนู ุฌููุน ุงูุฎุทูุงุช ุงูุณุงุจูุฉ (ุชุณูู ูุฐู ุงูุนูููุฉ **Rollback**)ุ ูุชุนูุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅูู ุญุงูุชูุง ุงูุฃุตููุฉ ูุจู ุจุฏุก ุงููุนุงููุฉ. ุฅุฐุง ูุฌุญุช ุฌููุน ุงูุฎุทูุงุชุ ูุชู ุญูุธ ุงูุชุบููุฑุงุช ุจุดูู ุฏุงุฆู (ุชุณูู ูุฐู ุงูุนูููุฉ **Commit**).

**ุฃูุงูุฑ SQL ูููุนุงููุงุช:**
* `BEGIN;`: ูุจุฏุก ูุนุงููุฉ ุฌุฏูุฏุฉ.
* `COMMIT;`: ูุญูุธ ุฌููุน ุงูุชุบููุฑุงุช ุจุดูู ุฏุงุฆู.
* `ROLLBACK;`: ููุชุฑุงุฌุน ุนู ุฌููุน ุงูุชุบููุฑุงุช ุงูุชู ุชูุช ููุฐ ุจุฏุงูุฉ ุงููุนุงููุฉ.

**ูุซุงู ุงูุชุญููู ุงูุจููู ุฏุงุฎู ูุนุงููุฉ:**
```sql
BEGIN;

UPDATE accounts SET balance = balance - 100 WHERE id = 'A';
UPDATE accounts SET balance = balance + 100 WHERE id = 'B';

-- ุฅุฐุง ุชูุช ุงูุนูููุชุงู ุจูุฌุงุญุ ูู ุจุงูุญูุธ
COMMIT;
```
ุฅุฐุง ุญุฏุซ ุฃู ุฎุทุฃ ุจูู ุนูููุชู `UPDATE`ุ ูููู ุฅุตุฏุงุฑ ุฃูุฑ `ROLLBACK` ูุฅูุบุงุก ุงูุฎุตู ูู ุงูุญุณุงุจ A.

---
### ๐งช 3. ุฎุตุงุฆุต ACID
ACID ูู ุงุฎุชุตุงุฑ ูุตู ุงูุฎุตุงุฆุต ุงูุฃุฑุจุน ุงูุชู ุชุถูููุง ุงููุนุงููุงุช ูู ุฃูุธูุฉ ููุงุนุฏ ุงูุจูุงูุงุช ููุญูุงุธ ุนูู ุณูุงูุฉ ุงูุจูุงูุงุช.

| ุงูุญุฑู | ุงูุฎุงุตูุฉ | ุงููุตู | ูุซุงู ุงูุชุญููู ุงูุจููู |
|:---:|:---|:---|:---|
| **A** | **Atomicity (ุงูุฐุฑูุฉ)** | "ุฅูุง ุงููู ุฃู ูุง ุดูุก". ุงููุนุงููุฉ ูุญุฏุฉ ูุง ุชุชุฌุฒุฃ. | ุงูุชุญููู ุฅูุง ุฃู ููุชูู (ุฎุตู ูุฅุถุงูุฉ)ุ ุฃู ููุดู ุจุงููุงูู (ูุง ูุชุบูุฑ ุฃู ุญุณุงุจ). |
| **C** | **Consistency (ุงูุงุชุณุงู)**| ุชุถูู ุงููุนุงููุฉ ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชูุชูู ูู ุญุงูุฉ ุตุญูุญุฉ ุฅูู ุญุงูุฉ ุตุญูุญุฉ ุฃุฎุฑู. | ูุฌุจ ุฃู ูุธู ุฅุฌูุงูู ุงูุฃููุงู ูู ุงูุจูู ููุง ูู ูุจู ูุจุนุฏ ุงูุชุญููู. ูุง ูููู ุฅูุดุงุก ุฃู ุชุฏููุฑ ุงููุงู. |
| **I** | **Isolation (ุงูุนุฒู)** | ุงููุนุงููุงุช ุงููุชุฒุงููุฉ ูุนุฒููุฉ ุนู ุจุนุถูุง ุงูุจุนุถ. ูุชูุฌุฉ ุชูููุฐ ุนุฏุฉ ูุนุงููุงุช ูู ููุณ ุงูููุช ูุฌุจ ุฃู ุชููู ููุงุซูุฉ ููุชูุฌุฉ ุชูููุฐูุง ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู. | ุฅุฐุง ุญุงูู ุดุฎุตุงู ุณุญุจ ุฃููุงู ูู ููุณ ุงูุญุณุงุจ ูู ููุณ ุงููุญุธุฉุ ูุฌุจ ุฃู ุชูุชุธุฑ ุฅุญุฏู ุงูุนูููุชูู ุงูุฃุฎุฑู ุญุชู ุชูุชูู ูููุน ุงูุชุถุงุฑุจ. |
| **D** | **Durability (ุงูุงุณุชูุฑุงุฑูุฉ)**| ุจูุฌุฑุฏ ุฃู ูุชู ุนูู `COMMIT` ูููุนุงููุฉุ ูุฅู ุชุบููุฑุงุชูุง ุชููู ุฏุงุฆูุฉ ููุญููุธุฉุ ุญุชู ูู ุญุงูุฉ ุงููุทุงุน ุงูุชูุงุฑ ุงูููุฑุจุงุฆู ุฃู ุชุนุทู ุงููุธุงู. | ุจูุฌุฑุฏ ุฃู ูุคูุฏ ุงูุจูู ุฃู ุงูุชุญููู ูุฏ ุชูุ ูุฅู ูุฐู ุงูุญูููุฉ ูุง ูููู ุฃู ุชุถูุน ุฃู ูุชู ุงูุชุฑุงุฌุน ุนููุง ุจุณุจุจ ุนุทู ููู. |

---
