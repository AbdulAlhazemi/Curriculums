## 🗃️ الوحدة 1: أساسيات قواعد البيانات العلائقية و SQL

### 📘 الدرس 4: لغة تعريف البيانات (DDL)

#### 🧠 **ماذا ستتعلم**
* ما هي أوامر DDL وما هو الغرض منها.
* كيفية إنشاء جدول جديد باستخدام `CREATE TABLE`.
* أشهر أنواع البيانات والقيود (Constraints) في SQL.
* كيفية تعديل هيكل جدول موجود باستخدام `ALTER TABLE`.
* كيفية حذف جدول بالكامل باستخدام `DROP TABLE`.

---
### 🏗️ 1. ما هي لغة تعريف البيانات (DDL)؟
DDL (اختصار لـ **D**ata **D**efinition **L**anguage) هي جزء من لغة SQL يُستخدم لإنشاء، تعديل، وحذف **هيكل** كائنات قاعدة البيانات، وأهمها الجداول. إنها الأدوات التي نستخدمها لبناء "الهيكل العظمي" لقاعدة بياناتنا.

> **ببساطة:** إذا كانت قاعدة البيانات هي المبنى، فإن أوامر DDL هي **المخططات الهندسية وأدوات البناء** التي تستخدمها لبناء الغرف (الجداول) وتحديد مواصفاتها (الأعمدة).

---
### ✨ 2. إنشاء أول جدول لك - الأمر `CREATE TABLE`
هذا هو الأمر الذي نستخدمه لإنشاء جدول جديد. عند إنشاء جدول، نحدد اسم الجدول، أسماء الأعمدة، **نوع البيانات** لكل عمود، وأي **قيود** نريد تطبيقها.

#### **أ. أشهر أنواع البيانات (PostgreSQL Data Types)**

| النوع | الوصف | مثال |
| :--- | :--- | :--- |
| `SERIAL` | عدد صحيح يزداد تلقائيًا (مثالي للمفاتيح الأساسية). | 1, 2, 3, ... |
| `INT` أو `INTEGER` | عدد صحيح. | `42` |
| `VARCHAR(n)` | نص متغير الطول بحد أقصى `n` من الأحرف. | `'Hello World'` |
| `TEXT` | نص بطول غير محدود. | `'This is a long description...'` |
| `BOOLEAN` | قيمة منطقية (`true` أو `false`). | `true` |
| `TIMESTAMP` | يخزن التاريخ والوقت معًا. | `'2025-06-12 18:30:00'` |
| `NUMERIC(p, s)`| عدد عشري دقيق. `p` هو إجمالي الأرقام و `s` هو عدد الأرقام بعد الفاصلة. | `123.45` |

#### **ب. أشهر القيود (Constraints)**

| القيد | الوصف |
| :--- | :--- |
| `PRIMARY KEY` | يضمن أن العمود هو المفتاح الأساسي (فريد وغير فارغ). |
| `NOT NULL` | يضمن أن العمود لا يمكن أن يحتوي على قيمة فارغة (`NULL`). |
| `UNIQUE` | يضمن أن جميع القيم في العمود فريدة ومختلفة عن بعضها. |
| `DEFAULT value` | يوفر قيمة افتراضية للعمود إذا لم يتم تحديد قيمة عند إدخال صف جديد. |

#### **مثال متكامل:**
لإنشاء جدول `users`:
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(255) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```
**للتحقق:** بعد تنفيذ الأمر في `psql`، يمكنك استخدام `\d users` لرؤية هيكل الجدول الذي أنشأته.

---
### 🔧 3. تعديل جدول موجود - الأمر `ALTER TABLE`
يستخدم هذا الأمر لإجراء تغييرات على هيكل جدول موجود.
* **إضافة عمود جديد:**
  ```sql
  ALTER TABLE users ADD COLUMN last_login TIMESTAMP;
  ```
* **حذف عمود:**
  ```sql
  ALTER TABLE users DROP COLUMN last_login;
  ```
* **إعادة تسمية عمود:**
  ```sql
  ALTER TABLE users RENAME COLUMN username TO user_name;
  ```

---
### 🗑️ 4. حذف جدول - الأمر `DROP TABLE`
يستخدم هذا الأمر لحذف جدول بالكامل.

> ⚠️ **تحذير خطير:** هذا الإجراء **نهائي ولا يمكن التراجع عنه**. سيتم حذف الجدول و**جميع البيانات** الموجودة فيه إلى الأبد. تعامل معه بحذر شديد.

```sql
DROP TABLE users;
```
> **نصيحة أمان:** لمنع حدوث خطأ إذا كان الجدول غير موجود، يمكنك استخدام `IF EXISTS`:
> ```sql
> DROP TABLE IF EXISTS users;
> ```

---
