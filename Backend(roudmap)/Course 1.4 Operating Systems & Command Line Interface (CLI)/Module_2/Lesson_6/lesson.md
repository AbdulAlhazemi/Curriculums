## 💻 الوحدة 2: إدارة النظام المتقدمة وسطر الأوامر

### 📘 الدرس 12: مقدمة في كتابة السكربتات (Shell Scripting)

#### 🧠 **ماذا ستتعلم**
* ما هو سكربت الصدفة (Shell Script) وما فائدته.
* أهمية السطر الأول في السكربت `#!/bin/bash` (Shebang).
* كيفية تعريف واستخدام المتغيرات.
* كيفية جعل السكربت قابلاً للتنفيذ باستخدام `chmod`.
* أساسيات التحكم في التدفق: الشروط (`if`) والحلقات (`for`).

---
### 📜 1. ما هو سكربت الصدفة؟
سكربت الصدفة هو ملف نصي يحتوي على سلسلة من الأوامر التي يمكن للصدفة (مثل Bash) تنفيذها. بدلاً من كتابة الأوامر واحدًا تلو الآخر في الطرفية، يمكنك تجميعها في ملف واحد وتشغيله لتنفيذها جميعًا بالترتيب. الهدف الرئيسي من السكربتات هو **أتمتة (automation)** المهام المتكررة.

---
### ✍️ 2. كتابة أول سكربت لك
كتابة السكربت تتطلب ثلاث خطوات بسيطة:

#### **أ. إنشاء الملف وكتابة الكود**
السطر الأول في أي سكربت يجب أن يكون الـ **Shebang**. هو يخبر نظام التشغيل بأي مفسِّر (أي صدفة) يجب استخدامها لتشغيل هذا السكربت.
```bash
#!/bin/bash

# هذا السطر هو تعليق، يتم تجاهله عند التنفيذ
# لنطبع رسالة ترحيب
echo "Hello from my first script!"
```
احفظ هذا الكود في ملف باسم `hello.sh`.

#### **ب. جعل الملف قابلاً للتنفيذ**
بشكل افتراضي، لا يمتلك الملف إذن التنفيذ. يجب أن نعطيه هذا الإذن باستخدام `chmod`.
```bash
chmod u+x hello.sh
```

#### **ج. تشغيل السكربت**
لتشغيل السكربت، يجب أن تحدد مساره. إذا كنت في نفس المجلد، استخدم `./` لتعني "المجلد الحالي".
```bash
./hello.sh
```
**الناتج المتوقع:**
```
Hello from my first script!
```

---
### 📦 3. المتغيرات في سكربتات باش
يمكنك تعريف متغيرات لتخزين القيم وإعادة استخدامها.
* **للتعريف:** `VARIABLE_NAME="value"` (ملاحظة: لا توجد مسافات حول علامة `=`).
* **للاستخدام:** أضف علامة الدولار `$` قبل اسم المتغير.

**مثال:**
```bash
#!/bin/bash

GREETING="Welcome to shell scripting"
USER_NAME=$(whoami) # $(whoami) ينفذ الأمر whoami ويخزن ناتجه

echo "$GREETING, $USER_NAME!"
```
---
### 🔀 4. التحكم في التدفق: الشروط والحلقات

* **الشروط (`if`):**
    تسمح لك بتنفيذ أوامر فقط إذا تحقق شرط معين.
    ```bash
    #!/bin/bash

    if [ -d "backups" ]; then
      echo "Backup directory already exists."
    else
      echo "Creating backup directory..."
      mkdir backups
    fi
    ```

* **الحلقات (`for`):**
    تسمح لك بتكرار مجموعة من الأوامر على قائمة من العناصر.
    ```bash
    #!/bin/bash

    # إنشاء نسخة احتياطية لجميع ملفات .txt
    for FILE in *.txt
    do
      echo "Backing up $FILE..."
      cp "$FILE" "backups/$FILE.bak"
    done

    echo "Backup finished."
    ```
---
