## 💻 الوحدة 2: إدارة النظام المتقدمة وسطر الأوامر

### 📘 الدرس 2: البحث عن الملفات والنصوص (Searching for Files and Text)

#### 🧠 **ماذا ستتعلم**
* كيفية البحث عن الملفات والمجلدات باستخدام الأمر `find`.
* كيفية البحث عن نصوص معينة داخل الملفات باستخدام الأمر `grep`.
* دمج `find` و `grep` لإجراء عمليات بحث قوية ومعقدة.

---
### 🔎 1. إيجاد الملفات والمجلدات - الأمر `find`
الأمر `find` هو أداة قوية للغاية للبحث عن الملفات والمجلدات بناءً على معايير مختلفة مثل الاسم، النوع، الحجم، وتاريخ التعديل.

**الصيغة العامة:** `find [المسار] -[الخيار] [القيمة]`

**أشهر الخيارات:**

* **البحث بالاسم (`-name`):**
    يمكنك استخدام علامة النجمة (`*`) كحرف بدل (wildcard) لتعني "أي شيء".
    ```bash
    # البحث عن ملف بالاسم الدقيق في المجلد الحالي
    find . -name "report.pdf"

    # البحث عن كل الملفات التي تنتهي بـ .log في مجلد /var/log
    find /var/log -name "*.log"
    ```

* **البحث بالنوع (`-type`):**
    للبحث عن الملفات (`f`) أو المجلدات (`d`).
    ```bash
    # البحث عن جميع المجلدات في المجلد الحالي
    find . -type d

    # البحث عن جميع الملفات التي تنتهي بـ .js في المجلد الحالي ومجلداته الفرعية
    find . -type f -name "*.js"
    ```

* **البحث بالحجم (`-size`):**
    للبحث عن الملفات الأكبر (`+`) أو الأصغر (`-`) من حجم معين.
    ```bash
    # البحث عن الملفات التي يزيد حجمها عن 10 ميغابايت في مجلدك الرئيسي
    find ~ -size +10M
    ```

---
### 📝 2. البحث عن نص داخل الملفات - الأمر `grep`
الأمر `grep` هو الأداة المفضلة للبحث عن سطر معين أو نمط نصي داخل ملف واحد أو عدة ملفات. إنه مثل استخدام `Ctrl+F` ولكن بقوة خارقة.

**الصيغة العامة:** `grep [خيارات] "النمط" [الملف/الملفات]`

**أشهر الخيارات:**

* **`-i` (ignore case):** يتجاهل حساسية الأحرف (يبحث عن `Error` و `error`).
    ```bash
    grep -i "error" application.log
    ```
* **`-r` (recursive):** يبحث بشكل متكرر في جميع الملفات داخل المجلد المحدد ومجلداته الفرعية.
    ```bash
    # ابحث عن كلمة "config" في كل ملف داخل المجلد الحالي
    grep -r "config" .
    ```
* **`-n` (line number):** يعرض رقم السطر الذي تم العثور فيه على النمط.
    ```bash
    grep -n "TODO" tasks.txt
    ```
* **`-v` (invert match):** يعرض جميع الأسطر التي **لا** تحتوي على النمط.
    ```bash
    # اعرض كل الأسطر التي لا تحتوي على كلمة "DEBUG"
    grep -v "DEBUG" output.log
    ```

---
### 🔗 3. دمج الأوامر: `find` مع `grep`
يمكنك دمج قوة `find` مع `grep` لإجراء عمليات بحث معقدة جدًا. على سبيل المثال، يمكنك البحث عن جميع ملفات HTML التي تحتوي على كلمة "form".

**مثال باستخدام خيار `-exec`:**
```bash
find . -type f -name "*.html" -exec grep -l "form" {} \;
```
* **`find . -type f -name "*.html"`**: يجد جميع الملفات التي تنتهي بـ `.html`.
* **`-exec`**: يقوم بتنفيذ الأمر التالي على كل نتيجة يتم العثور عليها.
* **`grep -l "form" {}`**: يبحث عن كلمة "form" داخل الملف. الخيار `-l` يجعل `grep` يطبع اسم الملف فقط عند العثور على النمط.
* **`{}`**: هو عنصر نائب يستبدله `find` باسم الملف الحالي.
* **`\;`**: علامة لنهاية الأمر `-exec`.

---
