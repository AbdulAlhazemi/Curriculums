## 📐 الوحدة 1: مبادئ الكود النظيف وأنماط التصميم

### 📘 الدرس 2: التعليقات والتوثيق (Comments and Documentation)

#### 🧠 **ماذا ستتعلم**
* الغرض الحقيقي من تعليقات الكود.
* متى **لا يجب** عليك كتابة التعليقات (مبدأ "الكود يوثق نفسه").
* متى **يجب** عليك كتابة التعليقات (شرح "لماذا" وليس "ماذا").
* مقدمة في توثيق الكود باستخدام معيار JSDoc.

---
### 🤔 1. فلسفة التعليقات: الكود الجيد يوثق نفسه
الفكرة الحديثة في كتابة الكود هي أن **أفضل تعليق هو عدم الحاجة إلى كتابة تعليق**. يجب أن يكون الكود نفسه واضحًا بما يكفي لدرجة أنه يشرح نفسه، وذلك من خلال استخدام أسماء جيدة للمتغيرات والدوال (كما تعلمنا في الدرس السابق).

* **مشاكل التعليقات:**
    * **تصبح قديمة:** عندما يتغير الكود، غالبًا ما ينسى المطورون تحديث التعليقات، مما يؤدي إلى تعليقات مضللة وكاذبة. **التعليق الخاطئ أسوأ من عدم وجود تعليق على الإطلاق.**
    * **تسبب الفوضى:** كثرة التعليقات غير الضرورية تجعل قراءة الكود أصعب.
    * **عذر للكود السيئ:** غالبًا ما تستخدم كعذر لكتابة كود معقد أو غامض. إذا احتجت إلى كتابة تعليق طويل لشرح دالة، فربما يجب عليك إعادة كتابة الدالة نفسها لتكون أبسط.

---
### ❌ 2. متى تكون التعليقات سيئة؟

* **التعليقات الزائدة عن الحاجة (Redundant Comments):** هي التي تصف ما يفعله الكود بشكل واضح بالفعل.
    ```javascript
    // سيئ: هذا التعليق لا يضيف أي قيمة
    // زيادة العداد بمقدار واحد
    i++; 
    ```
* **التعليقات المضللة (Misleading Comments):** تعليقات لم يتم تحديثها مع الكود.
* **الكود المعطّل (Commented-Out Code):** لا تترك أبدًا كتلًا كبيرة من الكود المعطل في مشروعك. استخدم نظام التحكم في الإصدارات (مثل Git) لتتبع الكود القديم.

---
### ✅ 3. متى تكون التعليقات جيدة؟
التعليقات الجيدة لا تشرح **ماذا** يفعله الكود، بل تشرح **لماذا** تم كتابته بهذه الطريقة.

* **شرح النية (Explaining Intent):**
    ```javascript
    // استخدمنا خوارزمية البحث هذه لأنها الأفضل للبيانات شبه المرتبة
    // على الرغم من أنها أبطأ في أسوأ الحالات.
    ```
* **توضيح منطق معقد:**
    ```javascript
    // هذا التعبير النمطي (Regex) يتحقق من صحة البريد الإلكتروني
    // مع مراعاة النطاقات الفرعية.
    const emailRegex = /.../;
    ```
* **التحذير من العواقب (Warning of Consequences):**
    ```javascript
    // تحذير: تغيير هذه القيمة يتطلب مسح ذاكرة التخزين المؤقت بالكامل!
    const CACHE_EXPIRATION = 3600;
    ```

---
### 📜 4. توثيق الكود باستخدام JSDoc
**JSDoc** هو معيار لكتابة تعليقات توثيقية منظمة في كود جافاسكريبت. يمكن للأدوات قراءة هذه التعليقات لإنشاء صفحات توثيق API تلقائيًا. كما أن محررات الكود (مثل VS Code) تستخدمها لتوفير إكمال تلقائي وتلميحات أفضل.

* **الصيغة:** تبدأ التعليقات بـ `/**` وتنتهي بـ `*/`. نستخدم وسومًا (tags) خاصة مثل `@param` و `@returns`.

**مثال:**
```javascript
/**
 * تحسب السعر الإجمالي لمجموعة من المنتجات مع إضافة الضريبة.
 *
 * @param {Array<Object>} products - مصفوفة من كائنات المنتجات.
 * @param {number} products[].price - سعر المنتج الواحد.
 * @param {number} products[].quantity - كمية المنتج.
 * @returns {number} السعر النهائي بعد إضافة الضريبة.
 */
function calculateTotalPrice(products) {
  const subtotal = products.reduce((total, p) => total + (p.price * p.quantity), 0);
  const tax = subtotal * 0.15;
  return subtotal + tax;
}
```
---
