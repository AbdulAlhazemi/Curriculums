# الوحدة 4: أوامر متقدمة وإصلاح الأخطاء
## الدرس 3: إعادة كتابة التاريخ (rebase و amend)

🧠 **ماذا ستتعلم**
* ما معنى "إعادة كتابة التاريخ" في Git.
* الفرق بين `git rebase` و `git commit --amend`.
* متى تستخدم كل أداة بأمان.

---

### 🧾 1. مقدمة: ما هي إعادة كتابة التاريخ؟
في Git، "التاريخ" يعني سجل الـ `commits`.
في بعض الأحيان، تحتاج إلى إعادة تنظيم أو تعديل هذا السجل لتحسين الوضوح أو دمج التعديلات.

---

### 🧾 2. `git commit --amend`
📌 تُستخدم لتعديل آخر `commit` (مثلاً: لتصحيح رسالة، أو إضافة ملف منسي).

#### مثال: تعديل الرسالة فقط
```bash
git commit --amend -m "رسالة جديدة"
```

#### مثال: إضافة ملفات منسية إلى نفس `commit`
```bash
git add ملف.txt
git commit --amend
```
💡 هذا لا يُنشئ `commit` جديد بل يُحدّث تغييرات في الأخير.

⚠️ **ملاحظة:** لا تستخدمها بعد دفع التعديلات إلى GitHub (`push`)، لأنها تغيّر معرّف الـ `commit` (ID).

---

### 🧾 3. `git rebase`
📌 يُستخدم لإعادة ترتيب أو دمج `commits` لجعل التاريخ أوضح.

**المثال الكلاسيكي:**
أنت على الفرع `feature` وتريد دمجه بـ `main` لكن مع سجل مرتب:

```bash
git switch feature
git rebase main
```
🔁 Git سيُعيد تشغيل كل `commit` في `feature` على قمة `main`.

---

### 🧾 4. مقارنة `rebase` vs `merge`

| ميزة | `merge` | `rebase` |
| :--- | :--- | :--- |
| يحتفظ بتاريخ الدمج | ✅ نعم | ❌ لا |
| ينشئ `commit` جديد | ✅ نعم | ❌ لا (عادةً) |
| التاريخ أنظف | ❌ قد يكون معقدًا | ✅ نعم |
| آمن بعد `push`؟ | ✅ نعم | ⚠️ يُفضل قبل `push` فقط |

---

