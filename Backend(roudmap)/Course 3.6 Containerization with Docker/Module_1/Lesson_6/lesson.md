## 🐳 الوحدة 1: أساسيات Docker والحاويات

### 📘 الدرس 6: بناء وتشغيل تطبيقات Node.js المعبأة

#### 🧠 **ماذا ستتعلم**
* كيفية استخدام الأمر `docker build` لإنشاء صورة من `Dockerfile`.
* مفهوم "الوسم" (Tagging) للصور باستخدام الخيار `-t`.
* كيفية تشغيل حاوية من الصورة المخصصة التي قمت ببنائها.
* كيفية التحقق من أن التطبيق المعبأ يعمل وعرض سجلاته.

---
### 📜➡️🖼️ 1. من الوصفة إلى قالب التقطيع: الأمر `docker build`
في الدرس السابق، قمنا بكتابة الـ `Dockerfile` (وصفتنا). الآن، نريد أن نطلب من محرك Docker أن يتبع هذه الوصفة لإنشاء **صورة (Image)** (قالب التقطيع). نستخدم لهذا الغرض الأمر `docker build`.

* **الصيغة العامة:** `docker build [OPTIONS] PATH`
    * **`PATH`**: هو مسار "سياق البناء" (Build Context)، وهو المجلد الذي يحتوي على `Dockerfile` وكود تطبيقك. عادةً ما نستخدم `.` لتعني "المجلد الحالي".
    * **`t-` (tag):** هذا هو الخيار الأهم. يستخدم لإعطاء اسم و "وسم" (إصدار) للصورة لكي نتمكن من التعرف عليها بسهولة. الصيغة هي `name:tag`.

**مثال:**
```bash
# تأكد من أنك في المجلد الجذر لمشروعك (حيث يوجد Dockerfile)
docker build -t my-node-app:v1.0 .
```
عند تنفيذ هذا الأمر، سترى Docker يمر على كل تعليمة في `Dockerfile` وينفذها، طبقة تلو الأخرى.

---
### ✅ 2. التحقق من الصورة
بعد انتهاء عملية البناء بنجاح، كيف نتأكد من أن الصورة تم إنشاؤها؟ نستخدم الأمر `docker images` الذي تعلمناه سابقًا.
```bash
docker images
```
يجب أن ترى الآن صورتك الجديدة `my-node-app` بوسم `v1.0` في أعلى القائمة.

---
### 🖼️➡️📦 3. من قالب التقطيع إلى الكعكة: الأمر `docker run`
الآن بعد أن أصبح لدينا القالب المخصص (الصورة)، يمكننا استخدامه لإنشاء وتشغيل أي عدد من الكعكات (الحاويات).
```bash
docker run -d -p 8080:3000 --name my-running-app my-node-app:v1.0
```
**تحليل الأمر:**
* `docker run`: ابدأ حاوية جديدة.
* `-d`: شغلها في الخلفية (detached).
* `-p 8080:3000`: اربط **المنفذ 8080 على جهازك المضيف** بـ **المنفذ 3000 داخل الحاوية** (المنفذ الذي حددناه بـ `EXPOSE` في `Dockerfile`).
* `--name my-running-app`: أعطِ الحاوية اسمًا مميزًا.
* `my-node-app:v1.0`: اسم الصورة والوسم الذي نريد إنشاء الحاوية منه.

---
### 👀 4. التحقق من الحاوية
يمكننا التحقق من أن تطبيقنا يعمل بعدة طرق:

1.  **عرض الحاويات قيد التشغيل:**
    ```bash
    docker ps
    ```
    يجب أن ترى حاويتك `my-running-app` في القائمة.

2.  **اختبار التطبيق:**
    افتح متصفح الويب واذهب إلى `http://localhost:8080`. يجب أن ترى الاستجابة من تطبيق Express الخاص بك!

3.  **عرض السجلات (Logs):**
    كيف نرى مخرجات `console.log` من تطبيقنا الذي يعمل داخل الحاوية؟ نستخدم الأمر `docker logs`.
    ```bash
    # اعرض السجلات الكاملة للحاوية
    docker logs my-running-app
    ```
    > **نصيحة احترافية:** استخدم الخيار `-f` لمشاهدة السجلات في الوقت الفعلي (مثل `tail -f`).
    > `docker logs -f my-running-app`

---
