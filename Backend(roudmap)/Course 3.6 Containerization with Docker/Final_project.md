## ๐ ุงููุดุฑูุน ุงูููุงุฆู: ุชุบููู ุชุทุจูู ูุชูุงูู ุจุงุณุชุฎุฏุงู Docker ู Docker Compose

### ๐ฏ ุงููุฏู
ุชุทุจูู ุงูููุงููู ุงูุชู ุชุนููุชูุง ูู ูุฐู ุงูุฏูุฑุฉ ูุฅูุดุงุก ุจูุฆุฉ ุชุทููุฑ ูุฅูุชุงุฌ ูุงููุฉ ููุงุจูุฉ ููููู ูุชุทุจูู Express API ููุงุนุฏุฉ ุจูุงูุงุชู ุจุงุณุชุฎุฏุงู `Dockerfile` ู `Docker Compose`. ูุฐุง ุงููุดุฑูุน ูุญุงูู ุจุดูู ูุจูุฑ ููููุฉ ุฅุนุฏุงุฏ ุงูุชุทุจููุงุช ูู ุจูุฆุงุช ุงูุนูู ุงูุญููููุฉ.

---

### ๐๏ธ ุฃุณุงุณ ุงููุดุฑูุน
ูุฌุจ ุนููู ุงุณุชุฎุฏุงู **ูุดุฑูุน Express CRUD API ุงููุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL** ุงูุฐู ุฃูุฌุฒุชู ูู ุงูุฏูุฑุฉ ุงูุณุงุจูุฉ (Course 3.3). ูุฐุง ุงููุดุฑูุน ูู ุงููุงุนุฏุฉ ุงูุชู ุณูููู ุจุจูุงุฆูุง ูุชุบููููุง.

---

### ๐ ููุงู ุงููุดุฑูุน

#### **ุงูุฌุฒุก ุงูุฃูู: ุชุบููู ุชุทุจูู Node.js (Containerizing the Node.js App)**
ุงููุฏู ูู ุฅูุดุงุก `Dockerfile` ุงุญุชุฑุงูู ููุญุณู ูุชุทุจูู Express ุงูุฎุงุต ุจู.

1.  **ุฅูุดุงุก `Dockerfile`:** ูู ุฌุฐุฑ ูุดุฑูุน Expressุ ุฃูุดุฆ ุงูููู.
2.  **ุชุทุจูู ุฃูุถู ุงูููุงุฑุณุงุช:** ูุฌุจ ุฃู ูุชุจุน ุงูู `Dockerfile` ุงูุฎุงุต ุจู ุงูููุงุฑุณุงุช ุงูุชู ุชุนูููุงูุง:
    * **ุงุณุชุฎุฏู ุตูุฑุฉ ุฃุณุงุณูุฉ ุตุบูุฑุฉ:** ุงุจุฏุฃ ุจู `FROM node:20-alpine`.
    * **ุญุณูู ุงูุชุฎุฒูู ุงููุคูุช:** ุงูุณุฎ `package.json` ุฃููุงูุ ุซู ุดุบู `npm ci`, ุซู ุงูุณุฎ ุจุงูู ุงูููุฏ.
    * **ุงุณุชุฎุฏู ุจูุงุก ูุชุนุฏุฏ ุงููุฑุงุญู (Multi-stage Build):**
        * ูุฑุญูุฉ `builder` ูุชุซุจูุช ุฌููุน ุงูุชุจุนูุงุช (`devDependencies` ํฌํจ).
        * ูุฑุญูุฉ `production` ููุงุฆูุฉ ุชูุณุฎ ููุท `node_modules` ุงูุฅูุชุงุฌูุฉ ูุงูููุฏ ูู ูุฑุญูุฉ `builder` ูุฅูุชุงุฌ ุตูุฑุฉ ููุงุฆูุฉ ุตุบูุฑุฉ.
    * **ุดุบู ููุณุชุฎุฏู ุบูุฑ ุฌุฐุฑู:** ุฃูุดุฆ ูุณุชุฎุฏููุง ููุฌููุนุฉ ุฌุฏูุฏุฉ ุฏุงุฎู ุงูู `Dockerfile` ููู ุจุงูุชุจุฏูู ุฅููู ุจุงุณุชุฎุฏุงู ุชุนูููุฉ `USER`.
    * **ุฃูุดุฆ ููู `.dockerignore`:** ูููุน ูุณุฎ ุงููููุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ ูุซู `node_modules` ุงููุญููุฉ ู `.git` ุฅูู ุตูุฑุชู.

---
#### **ุงูุฌุฒุก ุงูุซุงูู: ุฅุนุฏุงุฏ ุจูุฆุฉ ูุชุนุฏุฏุฉ ุงูุญุงููุงุช ุจุงุณุชุฎุฏุงู Docker Compose**
ุงููุฏู ูู ุชุนุฑูู ูุชุดุบูู ุชุทุจููู ุงููุงูู (ุงูู API ููุงุนุฏุฉ ุงูุจูุงูุงุช) ุจุงุณุชุฎุฏุงู ููู ูุงุญุฏ ูุฃูุฑ ูุงุญุฏ.

1.  **ุฅูุดุงุก `docker-compose.yml`:** ูู ุฌุฐุฑ ูุดุฑูุนูุ ุฃูุดุฆ ูุฐุง ุงูููู.
2.  **ุชุนุฑูู ุงูุฎุฏูุงุช:**
    * **ุฎุฏูุฉ `app` (ุชุทุจูู Node.js):**
        * ุงุณุชุฎุฏู `build: .` ููููู Compose ุจุจูุงุก ุงูุตูุฑุฉ ูู ุงูู `Dockerfile` ุงูุฐู ุฃูุดุฃุชู.
        * ุงุฑุจุท ุงูููุงูุฐุ ุนูู ุณุจูู ุงููุซุงู: `ports: - "3000:3000"`.
        * **ููุชุทููุฑ:** ุงุณุชุฎุฏู ุฑุจุท ุงููุฌูุฏุงุช (`volumes: - .:/app`) ูุชูุนูู ุงูุชุญุฏูุซ ุงููุจุงุดุฑ ููููุฏ.
        * ูุฑุฑ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุงุฒูุฉ ููุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช (`DB_HOST`, `DB_USER`, ุฅูุฎ). **ูุงู:** ูููุฉ `DB_HOST` ูุฌุจ ุฃู ุชููู ุงุณู ุฎุฏูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (e.g., `db`).
        * ุงุณุชุฎุฏู `depends_on: [db]` ูุถูุงู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุจุฏุฃ ุฃููุงู.
    * **ุฎุฏูุฉ `db` (ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL):**
        * ุงุณุชุฎุฏู ุงูุตูุฑุฉ ุงูุฑุณููุฉ: `image: postgres:14-alpine`.
        * ูุฑุฑ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุงุฒูุฉ ูู `POSTGRES_USER`, `POSTGRES_PASSWORD`, ู `POSTGRES_DB`.
        * **ุงูุฃูู:** ุงุณุชุฎุฏู ูุญุฏุฉ ุชุฎุฒูู ููุณูุงุฉ (named volume) ููุญูุงุธ ุนูู ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุฏุงุฆู: `volumes: - postgres-data:/var/lib/postgresql/data`.

3.  **ุชุดุบูู ุงูุจูุฆุฉ:**
    * ุงุณุชุฎุฏู `docker-compose up -d` ูุจุฏุก ูู ุดูุก.
    * ุงุณุชุฎุฏู `docker-compose logs -f app` ููุดุงูุฏุฉ ุณุฌูุงุช ุชุทุจููู.
    * ุงุฎุชุจุฑ ูุงุฌูุฉ API ุงูุฎุงุตุฉ ุจู ูุชุฃูุฏ ูู ุฃููุง ุชุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุนูู ุจุดูู ุตุญูุญ.
    * ุงุณุชุฎุฏู `docker-compose down` ูุฅููุงู ูุญุฐู ูู ุดูุก ุนูุฏ ุงูุงูุชูุงุก.

---
### โ ูุนุงููุฑ ุงูุชูููู
* `Dockerfile` ูุธูู ููุญุณู ูุชุจุน ุฃูุถู ุงูููุงุฑุณุงุช.
* ููู `docker-compose.yml` ูุนูู ุจุดูู ุตุญูุญ ููููู ุจุชุดุบูู ุงูุชุทุจูู ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุนูุง.
* ูุฏุฑุฉ ุชุทุจูู Node.js ุฏุงุฎู ุญุงููุชู ุนูู ุงูุงุชุตุงู ุจูุฌุงุญ ุจุญุงููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช.
* ุงุณุชูุฑุงุฑูุฉ ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุนุฏ ุฅููุงู ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุญุงููุงุช (ุจูุถู ุงูู volume).
* (ููุชุทููุฑ) ุนูู ุงูุชุญุฏูุซ ุงููุจุงุดุฑ ููููุฏ ุจูุฌุงุญ (ุจูุถู ุงูู bind mount).

---
### ๐ ุงูุฎุทูุฉ ุงูุฃููู
1.  ุงุจุฏุฃ ุจุงูุชุฑููุฒ ุนูู **ุงูุฌุฒุก ุงูุฃูู**. ูู ูุดุฑูุน Express API ุงูุฎุงุต ุจูุ ูู ุจุฅูุดุงุก ููู `Dockerfile` ู `.dockerignore`. ุญุงูู ุชุทุจูู ุฃูุถู ุงูููุงุฑุณุงุช ุงูุชู ุชุนูููุงูุงุ ุฎุงุตุฉ ุงูุจูุงุก ูุชุนุฏุฏ ุงููุฑุงุญูุ ูุจูุงุก ุตูุฑุฉ ูุญุณููุฉ ูุชุทุจููู.
2.  ุจุนุฏ ุจูุงุก ุงูุตูุฑุฉ ุจูุฌุงุญ (`docker build`)ุ ุงูุชูู ุฅูู ูุชุงุจุฉ ููู `docker-compose.yml`.

**ุชูุงูููุง!** ุจุฅููุงู ูุฐุง ุงููุดุฑูุนุ ุชููู ูุฏ ุทุจูุช ูุฌููุนุฉ ูู ุฃูู ุงูููุงุฑุงุช ุงููุทููุจุฉ ูู ุณูู ุงูุนูู ุงููููุ ุญูุซ ููุช ุจุชุญููู ุชุทุจูู ุนุงุฏู ุฅูู ุชุทุจูู ูุนุจุฃ ูู ุญุงููุงุชุ ุฌุงูุฒ ููุชุทููุฑ ุงูููุญุฏ ูุงููุดุฑ ุงูุณูู.