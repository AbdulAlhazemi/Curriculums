## ๐ ุงููุดุฑูุน ุงูููุงุฆู: ุจูุงุก ุฎุท ุฃูุงุจูุจ CI/CD ูุชูุงูู

### ๐ฏ ุงููุฏู
ุฅูุดุงุก ุฎุท ุฃูุงุจูุจ ูุงูู ููุชูุงูู ูุงููุดุฑ ุงููุณุชูุฑ (CI/CD) ููุดุฑูุน Express API ุจุงุณุชุฎุฏุงู **GitHub Actions**. ุณูููู ุณูุฑ ุงูุนูู (Workflow) ุชููุงุฆููุง ุจุจูุงุก ุงูุชุทุจููุ ูุชุดุบูู ูุฌููุนุฉ ุงูุงุฎุชุจุงุฑุงุช ุงููุงููุฉ (ุจูุง ูู ุฐูู ุงูุงุฎุชุจุงุฑุงุช ุงูุชูุงูููุฉ ุงูุชู ุชุชุทูุจ ูุงุนุฏุฉ ุจูุงูุงุช)ุ ููู ุงูููุงูุฉุ ูุญุงูุงุฉ ุนูููุฉ ุงููุดุฑ ุฅูู ุฎุงุฏู.

---

### ๐๏ธ ุฃุณุงุณ ุงููุดุฑูุน
ูุฌุจ ุนููู ุงุณุชุฎุฏุงู **ูุดุฑูุน Express CRUD API** ุงูุฐู ููุช ุจุจูุงุฆู ูุงุฎุชุจุงุฑู ูู ุงูุฏูุฑุงุช ุงูุณุงุจูุฉ. ูู ุงูุถุฑูุฑู ุฃู ูููู ูุฐุง ุงููุดุฑูุน:
1.  ููุฌูุฏูุง ูู ูุณุชูุฏุน (repository) ุนูู **GitHub**.
2.  ูุญุชูู ุนูู ูุฌููุนุฉ ุงุฎุชุจุงุฑุงุช (`npm test`) ุชุชุถูู ุงุฎุชุจุงุฑุงุช ุชูุงูููุฉ ุชุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL.

---

### ๐ ููุงู ุงููุดุฑูุน

#### **ุงูุฌุฒุก ุงูุฃูู: ุฅุนุฏุงุฏ ุงููุณุชูุฏุน (Repository Setup)**
ูุจู ูุชุงุจุฉ ุณูุฑ ุงูุนููุ ูุฌุจ ุนููู ุฅุนุฏุงุฏ ูุณุชูุฏุนู ุนูู GitHub:
1.  ุงุฐูุจ ุฅูู `Settings` > `Secrets and variables` > `Actions`.
2.  ุฃูุดุฆ **ุณุฑูุง ุฌุฏูุฏูุง (New repository secret)**:
    * **Name:** `POSTGRES_PASSWORD`
    * **Value:** ูููุฉ ุงููุฑูุฑ ุงูุชู ุชุณุชุฎุฏููุง ููุณุชุฎุฏู `postgres` ูู ูุงุนุฏุฉ ุจูุงูุงุชู.
3.  ุฃูุดุฆ **ูุชุบูุฑูุง ุฌุฏูุฏูุง (New repository variable)**:
    * **Name:** `POSTGRES_DB`
    * **Value:** ุงุณู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูุฎุงุตุฉ ุจู (e.g., `books_api_test`).

---
#### **ุงูุฌุฒุก ุงูุซุงูู: ุจูุงุก ุฎุท ุฃูุงุจูุจ ุงูุชูุงูู ุงููุณุชูุฑ (CI)**
ุฃูุดุฆ ููููุง ุฌุฏูุฏูุง ูู ูุดุฑูุนู ุจุงููุณุงุฑ `.github/workflows/main.yml`.

**1. ุชุนุฑูู ุณูุฑ ุงูุนูู ูุงูููุญูููุฒ:**
ุนุฑูู ุณูุฑ ุนูู ูุชู ุชุดุบููู ุนูุฏ ูู `push` ุฃู `pull_request` ูุณุชูุฏู ุงููุฑุน `main`.

**2. ุฅุนุฏุงุฏ ูููุฉ ุงูุงุฎุชุจุงุฑ (`test`):**
ูุฐู ูู ุงููููุฉ ุงูุฑุฆูุณูุฉ ุงูุชู ุณุชุชุฃูุฏ ูู ุฌูุฏุฉ ุงูููุฏ.
* **ุชุดุบูู ูุงุนุฏุฉ ุจูุงูุงุช:** ุงุณุชุฎุฏู ููุฒุฉ `services` ูู GitHub Actions ูุชุดุบูู ุญุงููุฉ Docker ุฌุงูุฒุฉ ูู PostgreSQL. ูุฐุง ููุดุฆ ูุงุนุฏุฉ ุจูุงูุงุช ูุคูุชุฉ ุชุนูู ููุท ุฃุซูุงุก ุชูููุฐ ุงููููุฉ.
* **ุฎุทูุงุช ุงููููุฉ:**
    ุฃ.  **`actions/checkout@v4`**: ุณุญุจ ูุณุฎุฉ ูู ุงูููุฏ.
    ุจ. **`actions/setup-node@v4`**: ุฅุนุฏุงุฏ ุจูุฆุฉ Node.js.
    ุฌ. **`npm ci`**: ุชุซุจูุช ุงูุชุจุนูุงุช ุจุดูู ูุธูู.
    ุฏ.  **`npm test`**: ุชุดุบูู ูุฌููุนุฉ ุงูุงุฎุชุจุงุฑุงุช. ูุฌุจ ุนููู ุชูุฑูุฑ ุงูุฃุณุฑุงุฑ ูุงููุชุบูุฑุงุช ููุชุบูุฑุงุช ุจูุฆุฉ ุฅูู ูุฐู ุงูุฎุทูุฉ ุญุชู ูุชููู ุชุทุจููู ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช ุงูุฎุฏูุฉ.

**ูุซุงู ุนูู ููู `main.yml` ููุฌุฒุก ุงูุซุงูู:**
```yaml
name: Node.js CI/CD

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    # ุชุดุบูู ุฎุฏูุฉ PostgreSQL ูู ุงูุฎูููุฉ ููุฐู ุงููููุฉ
    services:
      postgres:
        image: postgres:14-alpine
        env:
          POSTGRES_USER: postgres
          POSTGRES_PASSWORD: ${{ secrets.POSTGRES_PASSWORD }}
          POSTGRES_DB: ${{ vars.POSTGRES_DB }}
        ports:
          - 5432:5432
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    steps:
      - uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'
          
      - name: Install Dependencies
        run: npm ci

      - name: Run Tests
        # ุชูุฑูุฑ ุงูุฃุณุฑุงุฑ ูุงููุชุบูุฑุงุช ุฅูู ุณูุฑุจุช ุงูุงุฎุชุจุงุฑ
        run: npm test
        env:
          NODE_ENV: test
          PGHOST: localhost
          PGUSER: postgres
          PGDATABASE: ${{ vars.POSTGRES_DB }}
          PGPASSWORD: ${{ secrets.POSTGRES_PASSWORD }}
          PGPORT: 5432
```

---
#### **ุงูุฌุฒุก ุงูุซุงูุซ: ุฅุถุงูุฉ ูููุฉ ุงููุดุฑ (Conceptual Deployment)**
ุฃุถู ูููุฉ ุซุงููุฉ ุฅูู ููุณ ุงูููู ููุญุงูุงุฉ ุนูููุฉ ุงููุดุฑ.

1.  **ุงุณู ุงููููุฉ:** `deploy`.
2.  **ุงูุชุจุนูุฉ:** ุงุฌุนููุง ุชุนุชูุฏ ุนูู ูุฌุงุญ ูููุฉ `test` ุจุงุณุชุฎุฏุงู `needs: test`.
3.  **ุงูุดุฑุท:** ุงุฌุนููุง ุชุนูู ููุท ุนูุฏ ุงูุฏูุน ุฅูู ุงููุฑุน `main` ุจุงุณุชุฎุฏุงู `if: github.ref == 'refs/heads/main'`.
4.  **ุงูุฎุทูุงุช:** ุฃุถู ุฎุทูุงุช ุจุณูุทุฉ ุชุณุชุฎุฏู `run` ูุทุจุงุนุฉ ุฑุณุงุฆู ุชุญุงูู ุนูููุฉ ุงููุดุฑุ ูุซู:
    ```yaml
    steps:
      - name: Deploying to production
        run: |
          echo "๐ Deployment started..."
          echo "โ Application deployed successfully!"
    ```

---
### โ ูุนุงููุฑ ุงูุชูููู
* ุณูุฑ ุนูู GitHub Actions ูุนูู ุจูุฌุงุญ ุนูุฏ ูู `push` ุฅูู `main`.
* ูููุฉ `test` ุชููู ุจุฅุนุฏุงุฏ Node.js ูุฎุฏูุฉ PostgreSQL ุจูุฌุงุญ.
* ูุฌุงุญ ูุฌููุนุฉ ุงูุงุฎุชุจุงุฑุงุช (`npm test`) ุฏุงุฎู ุจูุฆุฉ CIุ ููุง ูุซุจุช ุงุชุตุงููุง ุจูุงุนุฏุฉ ุงูุจูุงูุงุช.
* ุธููุฑ ุนูุงูุฉ ุตุญ ุฎุถุฑุงุก (โ) ุนูู ุงูู commit ุงูุฎุงุต ุจู ูู GitHub.
* ูููุฉ `deploy` ุชุนูู ููุท ุจุนุฏ ูุฌุงุญ ูููุฉ `test` ูุนูู ุงููุฑุน `main` ููุท.

---
### ๐ ุงูุฎุทูุฉ ุงูุฃููู
1.  ุงุจุฏุฃ ุจุฅูุดุงุก ููู ุณูุฑ ุงูุนูู `main.yml` ูู ูุดุฑูุนู.
2.  ุฑูุฒ ุนูู ุฅุนุฏุงุฏ ูููุฉ `test` ุฃููุงู ูุน ุฎุฏูุฉ PostgreSQL.
3.  ูู ุจุฏูุน ุงูููู ุฅูู GitHub ูุดุงูุฏ ุณูุฑ ุงูุนูู ููู ูุนูู (ุฃู ููุดู) ูู ุนูุงูุฉ ุงูุชุจููุจ "Actions". ูู ุจุชุตุญูุญ ุงูุฃุฎุทุงุก ุญุชู ุชูุฌุญ ูููุฉ ุงูุงุฎุชุจุงุฑ.
4.  ุจุนุฏ ุฐููุ ุฃุถู ูููุฉ `deploy` ุงูููุงููููุฉ.

**ุชูุงูููุง!** ุจุฅููุงู ูุฐุง ุงููุดุฑูุนุ ุชููู ูุฏ ุทุจูุช ุฏูุฑุฉ DevOps ูุงููุฉุ ูู ูุชุงุจุฉ ุงูููุฏ ูุงููุจุงุฏุฆ ุงูุชุตููููุฉุ ุฅูู ุงูุงุฎุชุจุงุฑ ุงูุขููุ ูุตูููุง ุฅูู ุจูุงุก ุฎุท ุฃูุงุจูุจ ุฌุงูุฒ ูููุดุฑ ุงููุณุชูุฑ.