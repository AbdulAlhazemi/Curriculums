# الوحدة 5: وقت تشغيل جافاسكريبت والعمليات الداخلية  


## الدرس 1: بيئات تشغيل JavaScript — المتصفح، Node.js، و Bun

🧠 **ماذا ستتعلم**
* ما المقصود ببيئة تشغيل JavaScript
* الفرق بين المتصفح، Node.js، و Bun
* كيف تؤثر البيئة على قدرات جافاسكريبت
* ما هي الكائنات العالمية (Global Objects) في كل بيئة

---

🧾 **1. ما هي بيئة التشغيل؟**

بيئة التشغيل (Runtime Environment) هي النظام أو السياق الذي تُنفّذ فيه شيفرة جافاسكريبت.  
بمعنى آخر، هي المكان الذي تعيش فيه جافاسكريبت وتستطيع فيه التفاعل مع العالم الخارجي.

لكل بيئة تشغيل خصائص وأدوات مختلفة:

| البيئة        | تستخدم لـ               | أمثلة على الأدوات المتوفرة |
|---------------|--------------------------|-----------------------------|
| المتصفح       | صفحات الويب              | `window`, `document`, `alert` |
| Node.js       | السيرفرات / أدوات CLI    | `fs`, `process`, `http`     |
| Bun           | أدوات حديثة / بديل لـ Node | `Bun`, `fetch`, `console`    |

---

🛠️ **2. مقارنة بين البيئات الثلاثة**

| الميزة                  | المتصفح        | Node.js         | Bun              |
|-------------------------|----------------|------------------|------------------|
| الوصول إلى DOM         | ✅ نعم         | ❌ لا            | ❌ لا             |
| الوصول إلى نظام الملفات | ❌ لا         | ✅ نعم           | ✅ نعم            |
| الكائن العالمي          | `window`       | `global`         | `Bun` / `globalThis` |
| أداء بدء التشغيل        | متوسط          | جيد              | سريع جدًا         |
| دعم `fetch` مباشر       | ✅ نعم         | ❌ (إصدارات قديمة) | ✅ نعم            |

---

🧪 **جرب بنفسك**

افتح وحدة التحكم (Console) في المتصفح أو استخدم Node.js في الطرفية (Terminal):

### في المتصفح:
```javascript
console.log(window.location.href);
```
في Node.js:
```javascript
console.log(global.process.platform);
```
في Bun:
```javascript
console.log(Bun.version);
```
هل لاحظت الفرق في الكائنات المستخدمة؟ هذه هي الكائنات “العالمية” لكل بيئة.

⸻

👁️‍🗨️ مثال من الواقع

لنفترض أنك تكتب تطبيقًا للتفاعل مع مستخدمين:
	•	إذا كنت في المتصفح، يمكنك عرض نموذج تسجيل مستخدم والتفاعل مع النقرات.
	•	إذا كنت في Node.js، يمكنك حفظ المستخدم في قاعدة بيانات أو إنشاء ملف.
	•	إذا كنت تستخدم Bun، يمكنك القيام بالأمرين مع أداء أفضل.

⸻

🔍 حقيقة ممتعة

الكائن globalThis هو طريقة موحدة للوصول إلى الكائن العالمي، بغض النظر عن البيئة.

console.log(globalThis);

سواء كنت في المتصفح أو Node أو Bun، هذه الطريقة ستعمل.

⸻

🚀 ماذا بعد؟

في الدرس التالي، سنتعرف على كيفية عمل JavaScript تحت الغطاء — من الترجمة (compilation) إلى التنفيذ، وكيف تدير الذاكرة والعمليات.

⸻


هل ترغب أن أبدأ الآن بـ **الدرس 2: كيف تعمل JavaScript من الداخل**؟